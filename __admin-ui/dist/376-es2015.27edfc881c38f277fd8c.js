"use strict";(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[376],{56376:function(n,e,t){t.r(e),t.d(e,{LoginComponent:function(){return C},LoginGuard:function(){return M},LoginModule:function(){return O},loginRoutes:function(){return x}});var r=t(51169),o=t(71029),i=t(20233),a=t(20576),g=t(98370),p=t(79183),l=t(76456),c=t(36508),s=t(70060);function m(n,e){if(1&n&&(o.TgZ(0,"p",22),o._uU(1,"Photo by "),o.TgZ(2,"a",23),o._uU(3),o.qZA(),o._uU(4," on "),o.TgZ(5,"a",23),o._uU(6,"Unsplash"),o.qZA(),o.qZA()),2&n){const n=o.oxw();o.xp6(2),o.Q6J("href",n.imageCreatorUrl,o.LSH),o.xp6(1),o.Oqu(n.imageCreator),o.xp6(2),o.Q6J("href",n.imageUnsplashUrl,o.LSH)}}function d(n,e){if(1&n&&(o.TgZ(0,"p",24),o._uU(1),o.qZA()),2&n){const n=o.oxw();o.xp6(1),o.Oqu(n.imageLocation)}}function h(n,e){if(1&n&&o._UZ(0,"img",25),2&n){const n=o.oxw();o.Q6J("src",n.imageUrl,o.LSH)("alt",n.imageUrl)}}function u(n,e){1&n&&(o.TgZ(0,"span"),o._uU(1,"-"),o.qZA())}function w(n,e){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.YNc(2,u,2,0,"span",20),o.qZA()),2&n){const n=o.oxw();o.xp6(1),o.hij("",n.brand," "),o.xp6(1),o.Q6J("ngIf",!n.hideVendureBranding||!n.hideVersion)}}function f(n,e){1&n&&(o.TgZ(0,"span"),o._uU(1,"vendure"),o.qZA())}function _(n,e){if(1&n&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&n){const n=o.oxw();o.xp6(1),o.hij("v",n.version,"")}}class C{constructor(n,e,t){this.authService=n,this.router=e,this.httpClient=t,this.username="",this.password="",this.rememberMe=!1,this.version=a.s5M,this.brand=(0,a.hq7)().brand,this.hideVendureBranding=(0,a.hq7)().hideVendureBranding,this.hideVersion=(0,a.hq7)().hideVersion,this.customImageUrl=(0,a.hq7)().loginImageUrl,this.imageUrl="",this.imageUnsplashUrl="",this.imageLocation="",this.imageCreator="",this.imageCreatorUrl="",this.customImageUrl?this.imageUrl=this.customImageUrl:this.loadImage()}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(n=>{switch(n.__typename){case"CurrentUser":const e=this.getRedirectRoute();this.router.navigateByUrl(e||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=n.message}})}loadImage(){this.httpClient.get("https://login-image.vendure.io").toPromise().then(n=>{this.updateImage(n)})}updateImage(n){const e=n.user,t=n.location;this.imageUrl=n.urls.regular+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageCreator=e.name,this.imageLocation=t.name,this.imageCreatorUrl=e.links.html+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageUnsplashUrl=n.links.html}getRedirectRoute(){let n;const e=new RegExp(`${a.ONw}=(.*)`);try{const t=window.location.search.match(e);t&&1<t.length&&(n=atob(decodeURIComponent(t[1])))}catch(t){}return n}}C.\u0275fac=function(n){return new(n||C)(o.Y36(a.e80),o.Y36(i.F0),o.Y36(r.eN))},C.\u0275cmp=o.Xpm({type:C,selectors:[["vdr-login"]],decls:38,vars:33,consts:[[1,"login-wrapper"],[1,"login-wrapper-inner"],[1,"login-wrapper-image"],[1,"login-wrapper-image-content"],[1,"login-wrapper-image-title"],[1,"login-wrapper-image-copyright"],["class","creator",4,"ngIf"],["class","location",4,"ngIf"],[3,"src","alt",4,"ngIf"],[1,"login-wrapper-form"],[1,"login-title"],[1,"login-form"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"],["src","assets/logo-300px.png",1,"login-wrapper-logo"],[1,"creator"],["target","_blank",3,"href"],[1,"location"],[3,"src","alt"]],template:function(n,e){1&n&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.TgZ(7,"div",5),o.YNc(8,m,7,3,"p",6),o.YNc(9,d,2,1,"p",7),o.qZA(),o.qZA(),o.YNc(10,h,1,2,"img",8),o.qZA(),o.TgZ(11,"div",9),o.TgZ(12,"p",10),o._uU(13),o.ALo(14,"translate"),o.qZA(),o.TgZ(15,"form",11),o.TgZ(16,"div",12),o.TgZ(17,"input",13),o.NdJ("ngModelChange",function(n){return e.username=n}),o.ALo(18,"translate"),o.qZA(),o.TgZ(19,"input",14),o.NdJ("ngModelChange",function(n){return e.password=n}),o.ALo(20,"translate"),o.qZA(),o.TgZ(21,"clr-alert",15),o.TgZ(22,"clr-alert-item"),o.TgZ(23,"span",16),o._uU(24),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"clr-checkbox-wrapper"),o.TgZ(26,"input",17),o.NdJ("ngModelChange",function(n){return e.rememberMe=n}),o.qZA(),o.TgZ(27,"label"),o._uU(28),o.ALo(29,"translate"),o.qZA(),o.qZA(),o.TgZ(30,"button",18),o.NdJ("click",function(){return e.logIn()}),o._uU(31),o.ALo(32,"translate"),o.qZA(),o.qZA(),o.TgZ(33,"div",19),o.YNc(34,w,3,2,"span",20),o.YNc(35,f,2,0,"span",20),o.YNc(36,_,2,1,"span",20),o.qZA(),o.qZA(),o.qZA(),o._UZ(37,"img",21),o.qZA(),o.qZA()),2&n&&(o.xp6(5),o.hij(" ",o.lcZ(6,21,"common.login-image-title")," "),o.xp6(3),o.Q6J("ngIf",e.imageCreator),o.xp6(1),o.Q6J("ngIf",e.imageLocation),o.xp6(1),o.Q6J("ngIf",e.imageUrl),o.xp6(3),o.hij(" ",o.lcZ(14,23,"common.login-title")," "),o.xp6(4),o.Q6J("ngModel",e.username)("placeholder",o.lcZ(18,25,"common.username")),o.xp6(2),o.Q6J("ngModel",e.password)("placeholder",o.lcZ(20,27,"common.password")),o.xp6(2),o.ekj("visible",e.errorMessage),o.Q6J("clrAlertType","danger")("clrAlertClosable",!1),o.xp6(3),o.hij(" ",e.errorMessage," "),o.xp6(2),o.Q6J("ngModel",e.rememberMe),o.xp6(2),o.Oqu(o.lcZ(29,29,"common.remember-me")),o.xp6(2),o.Q6J("disabled",!e.username||!e.password),o.xp6(1),o.hij(" ",o.lcZ(32,31,"common.login")," "),o.xp6(3),o.Q6J("ngIf",e.brand),o.xp6(1),o.Q6J("ngIf",!e.hideVendureBranding),o.xp6(1),o.Q6J("ngIf",!e.hideVersion))},directives:[p.O5,l._Y,l.JL,l.F,a.y_K,l.Fj,l.JJ,l.On,c.TIm,c.CyW,c.I9z,c.PEh,l.Wl,c.KKC,c.MgK],pipes:[s.X$],styles:[".login-wrapper[_ngcontent-%COMP%]{background:#f0f2f5;background-image:none;height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{background:#fff;width:1120px;height:590px;display:flex;justify-content:flex-start;align-items:stretch;position:relative;border-radius:3px;overflow:hidden}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{flex-direction:column;height:auto;width:100%}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:100%;flex-grow:1;position:relative}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:300px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover;object-position:center;position:relative;z-index:1}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;bottom:0;z-index:10;background:#020024;background:linear-gradient(180deg,rgba(2,0,36,0) 0%,rgba(0,0,0,.75) 100%);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end;padding:30px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:bold;color:#fff;margin-bottom:20px}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.2rem}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]{opacity:.8}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6rem;color:#fff;margin:0!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:100%;width:400px;padding:40px;display:flex;flex-direction:column;align-items:stretch;justify-content:center;box-shadow:0 20px 25px #0000001a;overflow:hidden;border-radius:5px;flex-shrink:0}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:auto;width:100%;padding:20px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-weight:bold;font-size:1.2rem;margin-bottom:20px;color:#afafaf}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.username[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.password[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:15px;padding:12px 16px!important;background:#fff;font-size:14px;line-height:22px;color:#52667a;outline:none;-webkit-appearance:none}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%!important;margin-top:20px!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-logo[_ngcontent-%COMP%]{width:60px;height:auto;position:absolute;right:20px;top:20px}.version[_ngcontent-%COMP%]{flex:1;flex-grow:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation-delay:.2s;transform:translate(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@keyframes shake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}"]}),C.ctorParameters=()=>[{type:a.e80},{type:i.F0},{type:r.eN}];class M{constructor(n,e){this.router=n,this.authService=e}canActivate(n){return this.authService.checkAuthenticatedStatus().pipe((0,g.U)(n=>(n&&this.router.navigate(["/"]),!n)))}}M.\u0275fac=function(n){return new(n||M)(o.LFG(i.F0),o.LFG(a.e80))},M.\u0275prov=o.Yz7({factory:function(){return new M(o.LFG(i.F0),o.LFG(a.e80))},token:M,providedIn:"root"}),M.ctorParameters=()=>[{type:i.F0},{type:a.e80}];const x=[{path:"",component:C,pathMatch:"full",canActivate:[M]}];class O{}O.\u0275fac=function(n){return new(n||O)},O.\u0275mod=o.oAB({type:O}),O.\u0275inj=o.cJS({imports:[[a.m81,i.Bz.forChild(x)]]})}}]);
//# sourceMappingURL=376-es2015.27edfc881c38f277fd8c.js.map