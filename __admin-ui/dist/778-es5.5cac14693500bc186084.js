!function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(l){u=!0,o=l}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var o=n(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw s}}}}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function h(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[778],{10778:function(n,i,s){s.r(i),s.d(i,{AddCustomerToGroupDialogComponent:function(){return Tt},AddressCardComponent:function(){return wt},AddressDetailDialogComponent:function(){return _t},CustomerDetailComponent:function(){return Ut},CustomerGroupDetailDialogComponent:function(){return qt},CustomerGroupListComponent:function(){return Nt},CustomerGroupMemberListComponent:function(){return Ot},CustomerHistoryComponent:function(){return St},CustomerHistoryEntryHostComponent:function(){return kt},CustomerListComponent:function(){return Pt},CustomerModule:function(){return jt},CustomerResolver:function(){return Dt},CustomerStatusLabelComponent:function(){return Jt},SelectCustomerGroupDialogComponent:function(){return It},customerBreadcrumb:function(){return Qt},customerRoutes:function(){return Mt},"\u02750":function(){return Ft},"\u02751":function(){return Lt},"\u02752":function(){return Et}});var u=s(71029),d=s(20576),g=s(45327),v=s(45362),y=s(53600),Z=s(13012),b=s(89918),A=s(30125),x=s(84363),C=s(77194),T=s(21544),_=s(98370),w=s(56037),I=s(96361),U=s(7169),q=s(4315),N=s(96338),O=s(68885),k=s(96525),S=s(34308),P=s(19614),J=s(21385),D=s(45306),F=s(78001),L=s(76456),E=s(20233),M=s(857),Q=s(10576),j=s(47107),$=s(79183),Y=s(70060),G=s(36508),R=s(5671),B=function(e){return{groupName:e}};function H(e,t){if(1&e&&(u._uU(0),u.ALo(1,"translate")),2&e){var r=u.oxw();u.hij(" ",u.xi3(1,1,"customer.add-customers-to-group-with-name",u.VKq(4,B,r.group.name)),"\n")}}var V=function(e){return{count:e}};function K(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",3),u.NdJ("click",function(){return u.CHM(r),u.oxw().cancel()}),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"button",4),u.NdJ("click",function(){return u.CHM(r),u.oxw().add()}),u._uU(4),u.ALo(5,"translate"),u.qZA()}if(2&e){var n=u.oxw();u.xp6(1),u.Oqu(u.lcZ(2,3,"common.cancel")),u.xp6(2),u.Q6J("disabled",!n.selectedCustomerIds.length),u.xp6(1),u.hij(" ",u.xi3(5,5,"customer.add-customers-to-group-with-count",u.VKq(8,V,n.selectedCustomerIds.length))," ")}}function W(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){var r=t.ngIf;u.xp6(1),u.hij("",r,",")}}function X(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&e){var r=t.ngIf;u.xp6(1),u.hij(" ",r,"")}}function z(e,t){if(1&e&&(u.YNc(0,W,2,1,"span",3),u.YNc(1,X,2,1,"span",3)),2&e){var r,n,o=u.oxw();u.Q6J("ngIf",null==(r=o.addressForm.get("streetLine1"))?null:r.value),u.xp6(1),u.Q6J("ngIf",null==(n=o.addressForm.get("countryCode"))?null:n.value)}}function ee(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",4),u.NdJ("click",function(){return u.CHM(r),u.oxw().cancel()}),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"button",5),u.NdJ("click",function(){return u.CHM(r),u.oxw().save()}),u._uU(4),u.ALo(5,"translate"),u.qZA()}if(2&e){var n=u.oxw();u.xp6(1),u.Oqu(u.lcZ(2,3,"common.cancel")),u.xp6(2),u.Q6J("disabled",!n.addressForm.valid||!n.addressForm.touched),u.xp6(1),u.hij(" ",u.lcZ(5,5,"common.update")," ")}}function te(e,t){if(1&e&&(u.TgZ(0,"span",13),u._uU(1),u.qZA()),2&e){var r=u.oxw().ngIf;u.xp6(1),u.hij("",r.streetLine1,",")}}function re(e,t){1&e&&(u.TgZ(0,"vdr-chip",14),u._UZ(1,"clr-icon",15),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"customer.default-shipping-address")," "))}function ne(e,t){1&e&&(u.TgZ(0,"vdr-chip",14),u._UZ(1,"clr-icon",16),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"customer.default-billing-address")," "))}function oe(e,t){if(1&e){var r=u.EpF();u.ynx(0),u.TgZ(1,"button",17),u.NdJ("click",function(){return u.CHM(r),u.oxw(2).editAddress()}),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"vdr-dropdown"),u.TgZ(5,"button",18),u._uU(6),u.ALo(7,"translate"),u._UZ(8,"clr-icon",19),u.qZA(),u.TgZ(9,"vdr-dropdown-menu"),u.TgZ(10,"button",20),u.NdJ("click",function(){return u.CHM(r),u.oxw(2).setAsDefaultShippingAddress()}),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.TgZ(13,"button",20),u.NdJ("click",function(){return u.CHM(r),u.oxw(2).setAsDefaultBillingAddress()}),u._uU(14),u.ALo(15,"translate"),u.qZA(),u._UZ(16,"div",21),u.TgZ(17,"button",22),u.NdJ("click",function(){return u.CHM(r),u.oxw(2).delete()}),u._UZ(18,"clr-icon",23),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.qZA(),u.qZA(),u.BQk()}if(2&e){var n=u.oxw(2);u.xp6(2),u.hij(" ",u.lcZ(3,7,"common.edit")," "),u.xp6(4),u.hij(" ",u.lcZ(7,9,"common.more")," "),u.xp6(4),u.Q6J("disabled",n.isDefaultShipping),u.xp6(1),u.hij(" ",u.lcZ(12,11,"customer.set-as-default-shipping-address")," "),u.xp6(2),u.Q6J("disabled",n.isDefaultBilling),u.xp6(1),u.hij(" ",u.lcZ(15,13,"customer.set-as-default-billing-address")," "),u.xp6(5),u.hij(" ",u.lcZ(20,15,"common.delete")," ")}}function ie(e,t){if(1&e&&(u.TgZ(0,"div",1),u.TgZ(1,"div",2),u.TgZ(2,"div",3),u.YNc(3,te,2,1,"span",4),u._uU(4),u.qZA(),u.TgZ(5,"div",5),u.YNc(6,re,4,3,"vdr-chip",6),u.YNc(7,ne,4,3,"vdr-chip",6),u.qZA(),u.qZA(),u.TgZ(8,"div",7),u.TgZ(9,"div",8),u._UZ(10,"vdr-formatted-address",9),u.qZA(),u.qZA(),u.TgZ(11,"div",10),u._UZ(12,"vdr-entity-info",11),u.YNc(13,oe,21,17,"ng-container",12),u.qZA(),u.qZA()),2&e){var r=t.ngIf,n=u.oxw();u.xp6(3),u.Q6J("ngIf",r.streetLine1),u.xp6(1),u.hij(" ",r.countryCode," "),u.xp6(2),u.Q6J("ngIf",n.isDefaultShipping),u.xp6(1),u.Q6J("ngIf",n.isDefaultBilling),u.xp6(3),u.Q6J("address",r),u.xp6(2),u.Q6J("entity",r),u.xp6(1),u.Q6J("ngIf",n.editable)}}function se(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"customer.add-customer-to-group"),"\n")}function ae(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"span",5),u.NdJ("click",function(){var e=u.CHM(r),t=e.item;return e.clear(t)}),u._uU(1," \xd7 "),u.qZA(),u.TgZ(2,"vdr-chip",6),u._uU(3),u.qZA()}if(2&e){var n=t.item;u.xp6(2),u.Q6J("colorFrom",n.id),u.xp6(1),u.Oqu(n.name)}}function ce(e,t){if(1&e&&(u.TgZ(0,"vdr-chip",6),u._uU(1),u.qZA()),2&e){var r=t.item;u.Q6J("colorFrom",r.id),u.xp6(1),u.Oqu(r.name)}}function ue(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",7),u.NdJ("click",function(){return u.CHM(r),u.oxw().cancel()}),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"button",8),u.NdJ("click",function(){return u.CHM(r),u.oxw().add()}),u._uU(4),u.ALo(5,"translate"),u.qZA()}if(2&e){var n=u.oxw();u.xp6(1),u.Oqu(u.lcZ(2,3,"common.cancel")),u.xp6(2),u.Q6J("disabled",!n.selectedGroupIds.length),u.xp6(1),u.hij(" ",u.xi3(5,5,"customer.add-customer-to-groups-with-count",u.VKq(8,V,n.selectedGroupIds.length))," ")}}function le(e,t){if(1&e&&(u.TgZ(0,"div",23),u.ALo(1,"localeDate"),u._uU(2),u.ALo(3,"translate"),u.ALo(4,"timeAgo"),u.qZA()),2&e){var r=t.ngIf;u.Q6J("title",u.xi3(1,3,r,"medium")),u.xp6(2),u.AsE(" ",u.lcZ(3,6,"customer.last-login"),": ",u.lcZ(4,8,r)," ")}}function de(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",24),u.NdJ("click",function(){return u.CHM(r),u.oxw().create()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var n=u.oxw();u.Q6J("disabled",!(n.addressDefaultsUpdated||n.detailForm.valid&&n.detailForm.dirty)),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.create")," ")}}function me(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",24),u.NdJ("click",function(){return u.CHM(r),u.oxw(2).save()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}if(2&e){var n=u.oxw(2);u.Q6J("disabled",!(n.addressDefaultsUpdated||n.detailForm.valid&&n.detailForm.dirty)),u.xp6(1),u.hij(" ",u.lcZ(2,2,"common.update")," ")}}function pe(e,t){1&e&&u.YNc(0,me,3,4,"button",25),2&e&&u.Q6J("vdrIfPermissions","UpdateCustomer")}function fe(e,t){1&e&&(u.TgZ(0,"vdr-form-field",26),u.ALo(1,"translate"),u._UZ(2,"input",27),u.qZA()),2&e&&u.Q6J("label",u.lcZ(1,1,"customer.password"))}var ge=function(){return["customer","customFields"]};function he(e,t){if(1&e&&(u.TgZ(0,"section",28),u.TgZ(1,"label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u._UZ(4,"vdr-tabbed-custom-fields",29),u.qZA()),2&e){var r=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,3,"common.custom-fields")),u.xp6(2),u.Q6J("customFields",r.customFields)("customFieldsFormGroup",r.detailForm.get(u.DdM(5,ge)))}}function ve(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"vdr-chip",36),u.NdJ("iconClick",function(){var e=u.CHM(r).$implicit;return u.oxw(3).removeFromGroup(e)}),u._uU(1),u.qZA()}if(2&e){var n=t.$implicit;u.Q6J("colorFrom",n.id),u.xp6(1),u.Oqu(n.name)}}function ye(e,t){if(1&e&&(u.ynx(0),u.YNc(1,ve,2,2,"vdr-chip",35),u.BQk()),2&e){var r=u.oxw().ngIf;u.xp6(1),u.Q6J("ngForOf",r)}}function Ze(e,t){1&e&&(u._uU(0),u.ALo(1,"translate")),2&e&&u.hij(" ",u.lcZ(1,1,"customer.not-a-member-of-any-groups")," ")}function be(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",37),u.NdJ("click",function(){return u.CHM(r),u.oxw(2).addToGroup()}),u._UZ(1,"clr-icon",38),u._uU(2),u.ALo(3,"translate"),u.qZA()}2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"customer.add-customer-to-group")," "))}function Ae(e,t){if(1&e&&(u.TgZ(0,"div",30),u.TgZ(1,"label",31),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,ye,2,1,"ng-container",32),u.YNc(5,Ze,2,3,"ng-template",null,33,u.W1O),u.TgZ(7,"div"),u.YNc(8,be,4,3,"button",34),u.qZA(),u.qZA()),2&e){var r=t.ngIf,n=u.MAs(6);u.xp6(2),u.Oqu(u.lcZ(3,4,"customer.customer-groups")),u.xp6(2),u.Q6J("ngIf",r.length)("ngIfElse",n),u.xp6(4),u.Q6J("vdrIfPermissions","UpdateCustomerGroup")}}var xe=function(){return["UpdateCustomer"]};function Ce(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"vdr-address-card",45),u.NdJ("setAsDefaultBilling",function(e){return u.CHM(r),u.oxw(2).setDefaultBillingAddressId(e)})("setAsDefaultShipping",function(e){return u.CHM(r),u.oxw(2).setDefaultShippingAddressId(e)})("deleteAddress",function(e){return u.CHM(r),u.oxw(2).toggleDeleteAddress(e)}),u.ALo(1,"async"),u.ALo(2,"hasPermission"),u.qZA()}if(2&e){var n=t.$implicit,o=u.oxw(2);u.ekj("to-delete",o.addressesToDeleteIds.has(n.value.id)),u.Q6J("availableCountries",u.lcZ(1,8,o.availableCountries$))("isDefaultBilling",o.defaultBillingAddressId===n.value.id)("isDefaultShipping",o.defaultShippingAddressId===n.value.id)("addressForm",n)("customFields",o.addressCustomFields)("editable",u.lcZ(2,10,u.DdM(12,xe))&&!o.addressesToDeleteIds.has(n.value.id))}}function Te(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",46),u.NdJ("click",function(){return u.CHM(r),u.oxw(2).addAddress()}),u._UZ(1,"clr-icon",38),u._uU(2),u.ALo(3,"translate"),u.qZA()}2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"customer.create-new-address")," "))}var _e=function(e){return["/orders/",e]};function we(e,t){if(1&e&&(u.TgZ(0,"td",47),u._uU(1),u.qZA(),u.TgZ(2,"td",47),u._uU(3),u.qZA(),u.TgZ(4,"td",47),u._uU(5),u.ALo(6,"localeCurrency"),u.qZA(),u.TgZ(7,"td",47),u._uU(8),u.ALo(9,"localeDate"),u.qZA(),u.TgZ(10,"td",48),u._UZ(11,"vdr-table-row-action",49),u.ALo(12,"translate"),u.qZA()),2&e){var r=t.item;u.xp6(1),u.Oqu(r.code),u.xp6(2),u.Oqu(r.state),u.xp6(2),u.Oqu(u.xi3(6,6,r.totalWithTax,r.currencyCode)),u.xp6(3),u.Oqu(u.xi3(9,9,r.updatedAt,"medium")),u.xp6(3),u.Q6J("label",u.lcZ(12,12,"common.open"))("linkTo",u.VKq(14,_e,r.id))}}function Ie(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"div",39),u.TgZ(1,"div",40),u.TgZ(2,"h3"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.YNc(5,Ce,3,13,"vdr-address-card",41),u.YNc(6,Te,4,3,"button",42),u.qZA(),u.TgZ(7,"div",43),u.TgZ(8,"h3"),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.TgZ(11,"vdr-data-table",44),u.NdJ("itemsPerPageChange",function(e){return u.CHM(r),u.oxw().setOrderItemsPerPage(e)})("pageChange",function(e){return u.CHM(r),u.oxw().setOrderCurrentPage(e)}),u.ALo(12,"async"),u.ALo(13,"async"),u.ALo(14,"translate"),u.TgZ(15,"vdr-dt-column"),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.TgZ(18,"vdr-dt-column"),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.TgZ(21,"vdr-dt-column"),u._uU(22),u.ALo(23,"translate"),u.qZA(),u.TgZ(24,"vdr-dt-column"),u._uU(25),u.ALo(26,"translate"),u.qZA(),u._UZ(27,"vdr-dt-column"),u.YNc(28,we,13,16,"ng-template"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var n=u.oxw();u.xp6(3),u.Oqu(u.lcZ(4,13,"customer.addresses")),u.xp6(2),u.Q6J("ngForOf",n.getAddressFormControls()),u.xp6(1),u.Q6J("vdrIfPermissions","UpdateCustomer"),u.xp6(3),u.Oqu(u.lcZ(10,15,"customer.orders")),u.xp6(2),u.Q6J("items",u.lcZ(12,17,n.orders$))("itemsPerPage",n.ordersPerPage)("totalItems",u.lcZ(13,19,n.ordersCount$))("currentPage",n.currentOrdersPage)("emptyStateLabel",u.lcZ(14,21,"customer.no-orders-placed")),u.xp6(5),u.Oqu(u.lcZ(17,23,"common.code")),u.xp6(3),u.Oqu(u.lcZ(20,25,"order.state")),u.xp6(3),u.Oqu(u.lcZ(23,27,"order.total")),u.xp6(3),u.Oqu(u.lcZ(26,29,"common.updated-at"))}}function Ue(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"div",39),u.TgZ(1,"div",50),u.TgZ(2,"vdr-customer-history",51),u.NdJ("addNote",function(e){return u.CHM(r),u.oxw().addNoteToCustomer(e)})("updateNote",function(e){return u.CHM(r),u.oxw().updateNote(e)})("deleteNote",function(e){return u.CHM(r),u.oxw().deleteNote(e)}),u.ALo(3,"async"),u.ALo(4,"async"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var n=u.oxw();u.xp6(2),u.Q6J("customer",u.lcZ(3,2,n.entity$))("history",u.lcZ(4,4,n.history$))}}function qe(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"customer.update-customer-group")))}function Ne(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"customer.create-customer-group")))}function Oe(e,t){if(1&e&&(u.YNc(0,qe,3,3,"span",6),u.YNc(1,Ne,3,3,"span",6)),2&e){var r=u.oxw();u.Q6J("ngIf",r.group.id),u.xp6(1),u.Q6J("ngIf",!r.group.id)}}function ke(e,t){if(1&e&&(u.TgZ(0,"section",7),u.TgZ(1,"label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u._UZ(4,"vdr-tabbed-custom-fields",8),u.qZA()),2&e){var r=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,3,"common.custom-fields")),u.xp6(2),u.Q6J("customFields",r.customFields)("customFieldsFormGroup",r.form.get("customFields"))}}function Se(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"customer.update-customer-group")))}function Pe(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"customer.create-customer-group")))}function Je(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",9),u.NdJ("click",function(){return u.CHM(r),u.oxw().cancel()}),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"button",10),u.NdJ("click",function(){return u.CHM(r),u.oxw().save()}),u.YNc(4,Se,3,3,"span",6),u.YNc(5,Pe,3,3,"span",6),u.qZA()}if(2&e){var n=u.oxw();u.xp6(1),u.Oqu(u.lcZ(2,4,"common.cancel")),u.xp6(2),u.Q6J("disabled",!n.form.valid),u.xp6(1),u.Q6J("ngIf",n.group.id),u.xp6(1),u.Q6J("ngIf",!n.group.id)}}var De=function(){return["CreateCustomerGroup","UpdateCustomerGroup"]};function Fe(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"button",9),u.NdJ("click",function(){return u.CHM(r),u.oxw().create()}),u._UZ(1,"clr-icon",10),u._uU(2),u.ALo(3,"translate"),u.qZA()}2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"customer.create-new-customer-group")," "))}var Le=function(e){return{contents:e}},Ee=function(e){return["./",e]};function Me(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"td",11),u._UZ(1,"vdr-entity-info",12),u.qZA(),u.TgZ(2,"td",11),u.TgZ(3,"vdr-chip",13),u._uU(4),u.qZA(),u.qZA(),u.TgZ(5,"td",11),u.TgZ(6,"a",14),u._UZ(7,"clr-icon",15),u._uU(8),u.ALo(9,"translate"),u.qZA(),u.qZA(),u.TgZ(10,"td",16),u.TgZ(11,"button",17),u.NdJ("click",function(){var e=u.CHM(r).item;return u.oxw().update(e)}),u._UZ(12,"clr-icon",18),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.qZA(),u.TgZ(15,"td",19),u.TgZ(16,"vdr-dropdown"),u.TgZ(17,"button",20),u._uU(18),u.ALo(19,"translate"),u._UZ(20,"clr-icon",21),u.qZA(),u.TgZ(21,"vdr-dropdown-menu",22),u.TgZ(22,"button",23),u.NdJ("click",function(){var e=u.CHM(r).item;return u.oxw().delete(e.id)}),u.ALo(23,"hasPermission"),u._UZ(24,"clr-icon",24),u._uU(25),u.ALo(26,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var n=t.item,o=u.oxw();u.ekj("active",n.id===o.activeGroupId),u.xp6(1),u.Q6J("entity",n),u.xp6(1),u.ekj("active",n.id===o.activeGroupId),u.xp6(1),u.Q6J("colorFrom",n.id),u.xp6(1),u.Oqu(n.name),u.xp6(1),u.ekj("active",n.id===o.activeGroupId),u.xp6(1),u.Q6J("routerLink",u.VKq(31,Ee,u.VKq(29,Le,n.id))),u.xp6(2),u.hij(" ",u.lcZ(9,19,"customer.view-group-members")," "),u.xp6(2),u.ekj("active",n.id===o.activeGroupId),u.xp6(3),u.hij(" ",u.lcZ(14,21,"common.edit")," "),u.xp6(2),u.ekj("active",n.id===o.activeGroupId),u.xp6(3),u.hij(" ",u.lcZ(19,23,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(23,25,"DeleteCustomerGroup")),u.xp6(3),u.hij(" ",u.lcZ(26,27,"common.delete")," ")}}function Qe(e,t){1&e&&u._UZ(0,"vdr-empty-placeholder")}function je(e,t){if(1&e){var r=u.EpF();u.ynx(0),u.TgZ(1,"div",25),u.TgZ(2,"div",26),u._uU(3),u.ALo(4,"async"),u.qZA(),u._UZ(5,"div",27),u.TgZ(6,"button",28),u.NdJ("click",function(){return u.CHM(r),u.oxw().closeMembers()}),u._UZ(7,"clr-icon",29),u.qZA(),u.qZA(),u.TgZ(8,"div",30),u.TgZ(9,"vdr-dropdown"),u.TgZ(10,"button",31),u._uU(11),u.ALo(12,"translate"),u._UZ(13,"clr-icon",21),u.qZA(),u.TgZ(14,"vdr-dropdown-menu",22),u.TgZ(15,"button",32),u.NdJ("click",function(){var e=u.CHM(r).ngIf,t=u.oxw();return t.removeFromGroup(e,t.selectedCustomerIds)}),u.ALo(16,"hasPermission"),u._UZ(17,"clr-icon",24),u._uU(18),u.ALo(19,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(20,"button",33),u.NdJ("click",function(){var e=u.CHM(r).ngIf;return u.oxw().addToGroup(e)}),u._uU(21),u.ALo(22,"translate"),u.qZA(),u.qZA(),u.TgZ(23,"vdr-customer-group-member-list",34),u.NdJ("selectionChange",function(e){return u.CHM(r),u.oxw().selectedCustomerIds=e})("fetchParamsChange",function(e){return u.CHM(r),u.oxw().fetchGroupMembers$.next(e)}),u.ALo(24,"async"),u.ALo(25,"async"),u.qZA(),u.BQk()}if(2&e){var n=t.ngIf,o=u.oxw();u.xp6(3),u.AsE("",n.name," (",u.lcZ(4,11,o.membersTotal$),")"),u.xp6(7),u.Q6J("disabled",0===o.selectedCustomerIds.length),u.xp6(1),u.hij(" ",u.xi3(12,13,"common.with-selected",u.VKq(27,V,o.selectedCustomerIds.length))," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(16,16,"UpdateCustomerGroup")),u.xp6(3),u.hij(" ",u.lcZ(19,18,"customer.remove-from-group")," "),u.xp6(3),u.hij(" ",u.xi3(22,20,"customer.add-customers-to-group",u.VKq(29,B,n.name))," "),u.xp6(2),u.Q6J("members",u.lcZ(24,23,o.members$))("route",o.route)("totalItems",u.lcZ(25,25,o.membersTotal$))("selectedMemberIds",o.selectedCustomerIds)}}var $e=function(e){return["/customer","customers",e]};function Ye(e,t){if(1&e&&(u.TgZ(0,"td",3),u._uU(1),u.qZA(),u.TgZ(2,"td",3),u._uU(3),u.qZA(),u.TgZ(4,"td",4),u._UZ(5,"vdr-table-row-action",5),u.ALo(6,"translate"),u.qZA()),2&e){var r=t.item;u.xp6(1),u.lnq(" ",r.title," ",r.firstName," ",r.lastName," "),u.xp6(2),u.Oqu(r.emailAddress),u.xp6(2),u.Q6J("label",u.lcZ(6,6,"common.edit"))("linkTo",u.VKq(8,$e,r.id))}}var Ge=["portal"];function Re(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"vdr-timeline-entry",4),u.TgZ(1,"div",5),u.TgZ(2,"textarea",6),u.NdJ("ngModelChange",function(e){return u.CHM(r),u.oxw().note=e}),u.qZA(),u.TgZ(3,"button",7),u.NdJ("click",function(){return u.CHM(r),u.oxw().addNoteToCustomer()}),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var n=u.oxw();u.xp6(2),u.Q6J("ngModel",n.note),u.xp6(1),u.Q6J("disabled",!n.note),u.xp6(1),u.hij(" ",u.lcZ(5,3,"order.add-note")," ")}}function Be(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"vdr-customer-history-entry-host",10),u.NdJ("expandClick",function(){u.CHM(r);var e=u.oxw(2);return e.expanded=!e.expanded}),u.qZA()}if(2&e){var n=u.oxw().$implicit,o=u.oxw();u.Q6J("customer",o.customer)("entry",n)("expanded",o.expanded)}}function He(e,t){1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.BQk()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"customer.history-using-native-auth-strategy")," "))}var Ve=function(e){return{strategy:e}};function Ke(e,t){if(1&e&&(u._uU(0),u.ALo(1,"translate")),2&e){var r=u.oxw(3).$implicit;u.hij(" ",u.xi3(1,1,"customer.history-using-external-auth-strategy",u.VKq(4,Ve,r.data.strategy))," ")}}function We(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",15),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,He,3,3,"ng-container",16),u.YNc(5,Ke,2,6,"ng-template",null,17,u.W1O),u.BQk()),2&e){var r=u.MAs(6),n=u.oxw(2).$implicit;u.xp6(2),u.hij(" ",u.lcZ(3,3,"customer.history-customer-registered")," "),u.xp6(2),u.Q6J("ngIf","native"===n.data.strategy)("ngIfElse",r)}}function Xe(e,t){1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.BQk()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"customer.history-using-native-auth-strategy")," "))}function ze(e,t){if(1&e&&(u._uU(0),u.ALo(1,"translate")),2&e){var r=u.oxw(3).$implicit;u.hij(" ",u.xi3(1,1,"customer.history-using-external-auth-strategy",u.VKq(4,Ve,r.data.strategy))," ")}}function et(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",15),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,Xe,3,3,"ng-container",16),u.YNc(5,ze,2,6,"ng-template",null,17,u.W1O),u.BQk()),2&e){var r=u.MAs(6),n=u.oxw(2).$implicit;u.xp6(2),u.hij(" ",u.lcZ(3,3,"customer.history-customer-verified")," "),u.xp6(2),u.Q6J("ngIf","native"===n.data.strategy)("ngIfElse",r)}}function tt(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",18),u._uU(2),u.ALo(3,"translate"),u.TgZ(4,"vdr-history-entry-detail"),u._UZ(5,"vdr-object-tree",19),u.qZA(),u.qZA(),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(2),u.hij(" ",u.lcZ(3,2,"customer.history-customer-detail-updated")," "),u.xp6(3),u.Q6J("value",r.data.input)}}function rt(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(1),u.hij(" ",u.xi3(2,1,"customer.history-customer-added-to-group",u.VKq(4,B,r.data.groupName))," ")}}function nt(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(1),u.hij(" ",u.xi3(2,1,"customer.history-customer-removed-from-group",u.VKq(4,B,r.data.groupName))," ")}}function ot(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.TgZ(3,"div",18),u.TgZ(4,"div",20),u._uU(5),u.qZA(),u.qZA(),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(1),u.hij(" ",u.lcZ(2,2,"customer.history-customer-address-created")," "),u.xp6(4),u.Oqu(r.data.address)}}function it(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.TgZ(3,"div",18),u.TgZ(4,"div",20),u._uU(5),u.qZA(),u.TgZ(6,"vdr-history-entry-detail"),u._UZ(7,"vdr-object-tree",19),u.qZA(),u.qZA(),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(1),u.hij(" ",u.lcZ(2,3,"customer.history-customer-address-updated")," "),u.xp6(4),u.Oqu(r.data.address),u.xp6(2),u.Q6J("value",r.data.input)}}function st(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.TgZ(3,"div",20),u._uU(4),u.qZA(),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(1),u.hij(" ",u.lcZ(2,2,"customer.history-customer-address-deleted")," "),u.xp6(3),u.Oqu(r.data.address)}}function at(e,t){1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.BQk()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"customer.history-customer-password-updated")," "))}function ct(e,t){1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.BQk()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"customer.history-customer-password-reset-requested")," "))}function ut(e,t){1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"translate"),u.BQk()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"customer.history-customer-password-reset-verified")," "))}function lt(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",18),u._uU(2),u.ALo(3,"translate"),u.TgZ(4,"vdr-history-entry-detail"),u.TgZ(5,"vdr-labeled-data",21),u.ALo(6,"translate"),u._uU(7),u.qZA(),u.TgZ(8,"vdr-labeled-data",21),u.ALo(9,"translate"),u._uU(10),u.qZA(),u.qZA(),u.qZA(),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(2),u.hij(" ",u.lcZ(3,5,"customer.history-customer-email-update-requested")," "),u.xp6(3),u.Q6J("label",u.lcZ(6,7,"customer.old-email-address")),u.xp6(2),u.Oqu(r.data.oldEmailAddress),u.xp6(1),u.Q6J("label",u.lcZ(9,9,"customer.new-email-address")),u.xp6(2),u.Oqu(r.data.newEmailAddress)}}function dt(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",18),u._uU(2),u.ALo(3,"translate"),u.TgZ(4,"vdr-history-entry-detail"),u.TgZ(5,"vdr-labeled-data",21),u.ALo(6,"translate"),u._uU(7),u.qZA(),u.TgZ(8,"vdr-labeled-data",21),u.ALo(9,"translate"),u._uU(10),u.qZA(),u.qZA(),u.qZA(),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(2),u.hij(" ",u.lcZ(3,5,"customer.history-customer-email-update-verified")," "),u.xp6(3),u.Q6J("label",u.lcZ(6,7,"customer.old-email-address")),u.xp6(2),u.Oqu(r.data.oldEmailAddress),u.xp6(1),u.Q6J("label",u.lcZ(9,9,"customer.new-email-address")),u.xp6(2),u.Oqu(r.data.newEmailAddress)}}function mt(e,t){if(1&e){var r=u.EpF();u.ynx(0),u.TgZ(1,"div",18),u.TgZ(2,"div",22),u._uU(3),u.qZA(),u._UZ(4,"div",23),u.TgZ(5,"vdr-dropdown"),u.TgZ(6,"button",24),u._UZ(7,"clr-icon",25),u.qZA(),u.TgZ(8,"vdr-dropdown-menu",26),u.TgZ(9,"button",27),u.NdJ("click",function(){u.CHM(r);var e=u.oxw(2).$implicit;return u.oxw().updateNote.emit(e)}),u.ALo(10,"hasPermission"),u._UZ(11,"clr-icon",28),u._uU(12),u.ALo(13,"translate"),u.qZA(),u._UZ(14,"div",29),u.TgZ(15,"button",27),u.NdJ("click",function(){u.CHM(r);var e=u.oxw(2).$implicit;return u.oxw().deleteNote.emit(e)}),u.ALo(16,"hasPermission"),u._UZ(17,"clr-icon",30),u._uU(18),u.ALo(19,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.BQk()}if(2&e){var n=u.oxw(2).$implicit;u.xp6(3),u.hij(" ",n.data.note," "),u.xp6(6),u.Q6J("disabled",!u.lcZ(10,5,"UpdateCustomer")),u.xp6(3),u.hij(" ",u.lcZ(13,7,"common.edit")," "),u.xp6(3),u.Q6J("disabled",!u.lcZ(16,9,"UpdateCustomer")),u.xp6(3),u.hij(" ",u.lcZ(19,11,"common.delete")," ")}}function pt(e,t){if(1&e&&(u.TgZ(0,"vdr-history-entry-detail"),u._UZ(1,"vdr-object-tree",19),u.qZA()),2&e){var r=u.oxw(3).$implicit;u.xp6(1),u.Q6J("value",r.data)}}function ft(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",15),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,pt,2,1,"vdr-history-entry-detail",31),u.BQk()),2&e){var r=u.oxw(2).$implicit;u.xp6(2),u.hij(" ",u.lcZ(3,2,r.type)," "),u.xp6(2),u.Q6J("ngIf",r.data)}}function gt(e,t){if(1&e&&(u.TgZ(0,"vdr-timeline-entry",11),u.ynx(1,12),u.YNc(2,We,7,5,"ng-container",13),u.YNc(3,et,7,5,"ng-container",13),u.YNc(4,tt,6,4,"ng-container",13),u.YNc(5,rt,3,6,"ng-container",13),u.YNc(6,nt,3,6,"ng-container",13),u.YNc(7,ot,6,4,"ng-container",13),u.YNc(8,it,8,5,"ng-container",13),u.YNc(9,st,5,4,"ng-container",13),u.YNc(10,at,3,3,"ng-container",13),u.YNc(11,ct,3,3,"ng-container",13),u.YNc(12,ut,3,3,"ng-container",13),u.YNc(13,lt,11,11,"ng-container",13),u.YNc(14,dt,11,11,"ng-container",13),u.YNc(15,mt,20,13,"ng-container",13),u.YNc(16,ft,5,4,"ng-container",14),u.BQk(),u.qZA()),2&e){var r=u.oxw().$implicit,n=u.oxw();u.Q6J("displayType",n.getDisplayType(r))("iconShape",n.getTimelineIcon(r))("createdAt",r.createdAt)("name",n.getName(r))("featured",n.isFeatured(r)),u.xp6(1),u.Q6J("ngSwitch",r.type),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_REGISTERED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_VERIFIED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_DETAIL_UPDATED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_ADDED_TO_GROUP),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_REMOVED_FROM_GROUP),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_ADDRESS_CREATED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_ADDRESS_UPDATED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_ADDRESS_DELETED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_PASSWORD_UPDATED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_PASSWORD_RESET_REQUESTED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_PASSWORD_RESET_VERIFIED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_EMAIL_UPDATE_REQUESTED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_EMAIL_UPDATE_VERIFIED),u.xp6(1),u.Q6J("ngSwitchCase",n.type.CUSTOMER_NOTE)}}function ht(e,t){if(1&e&&(u.ynx(0),u.YNc(1,Be,1,3,"vdr-customer-history-entry-host",8),u.YNc(2,gt,17,20,"ng-template",null,9,u.W1O),u.BQk()),2&e){var r=t.$implicit,n=u.MAs(3),o=u.oxw();u.xp6(1),u.Q6J("ngIf",o.hasCustomComponent(r.type))("ngIfElse",n)}}var vt=function(){return["./create"]};function yt(e,t){1&e&&(u.TgZ(0,"a",5),u._UZ(1,"clr-icon",6),u._uU(2),u.ALo(3,"translate"),u.qZA()),2&e&&(u.Q6J("routerLink",u.DdM(4,vt)),u.xp6(2),u.hij(" ",u.lcZ(3,2,"customer.create-new-customer")," "))}function Zt(e,t){if(1&e){var r=u.EpF();u.TgZ(0,"td",7),u._uU(1),u.qZA(),u.TgZ(2,"td",7),u._uU(3),u.qZA(),u.TgZ(4,"td",7),u._UZ(5,"vdr-customer-status-label",8),u.qZA(),u.TgZ(6,"td",9),u._UZ(7,"vdr-table-row-action",10),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"td"),u.TgZ(10,"vdr-dropdown"),u.TgZ(11,"button",11),u._uU(12),u.ALo(13,"translate"),u._UZ(14,"clr-icon",12),u.qZA(),u.TgZ(15,"vdr-dropdown-menu",13),u.TgZ(16,"button",14),u.NdJ("click",function(){var e=u.CHM(r).item;return u.oxw().deleteCustomer(e)}),u.ALo(17,"hasPermission"),u._UZ(18,"clr-icon",15),u._uU(19),u.ALo(20,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var n=t.item;u.xp6(1),u.lnq(" ",n.title," ",n.firstName," ",n.lastName," "),u.xp6(2),u.Oqu(n.emailAddress),u.xp6(2),u.Q6J("customer",n),u.xp6(2),u.Q6J("label",u.lcZ(8,10,"common.edit"))("linkTo",u.VKq(18,Ee,n.id)),u.xp6(5),u.hij(" ",u.lcZ(13,12,"common.actions")," "),u.xp6(4),u.Q6J("disabled",!u.lcZ(17,14,"DeleteCustomer")),u.xp6(3),u.hij(" ",u.lcZ(20,16,"common.delete")," ")}}function bt(e,t){1&e&&(u.ynx(0),u._UZ(1,"clr-icon",1),u._uU(2),u.ALo(3,"translate"),u.BQk()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"customer.verified")," "))}function At(e,t){1&e&&(u.ynx(0),u._UZ(1,"clr-icon",2),u._uU(2),u.ALo(3,"translate"),u.BQk()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"customer.registered")," "))}function xt(e,t){if(1&e&&(u.TgZ(0,"vdr-chip"),u.YNc(1,bt,4,3,"ng-container",0),u.YNc(2,At,4,3,"ng-container",0),u.qZA()),2&e){var r=u.oxw();u.xp6(1),u.Q6J("ngIf",null==r.customer.user?null:r.customer.user.verified),u.xp6(1),u.Q6J("ngIf",!(null!=r.customer.user&&r.customer.user.verified))}}function Ct(e,t){1&e&&(u.TgZ(0,"vdr-chip"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"customer.guest")))}var Tt=function(){function e(t){f(this,e),this.dataService=t,this.selectedCustomerIds=[],this.fetchGroupMembers$=new g.X({skip:0,take:10,filterTerm:""})}return h(e,[{key:"ngOnInit",value:function(){var e=this,t=this.fetchGroupMembers$.pipe((0,T.w)(function(t){var r=t.skip,n=t.take,o=t.filterTerm;return e.dataService.customer.getCustomerList(n,r,o).mapStream(function(e){return e.customers})}));this.customers$=t.pipe((0,_.U)(function(e){return e.items})),this.customersTotal$=t.pipe((0,_.U)(function(e){return e.totalItems}))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedCustomerIds)}}]),e}();Tt.\u0275fac=function(e){return new(e||Tt)(u.Y36(d.DoR))},Tt.\u0275cmp=u.Xpm({type:Tt,selectors:[["vdr-add-customer-to-group-dialog"]],decls:5,vars:8,consts:[["vdrDialogTitle",""],[3,"members","totalItems","route","selectedMemberIds","fetchParamsChange","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(u.YNc(0,H,2,6,"ng-template",0),u.TgZ(1,"vdr-customer-group-member-list",1),u.NdJ("fetchParamsChange",function(e){return t.fetchGroupMembers$.next(e)})("selectionChange",function(e){return t.selectedCustomerIds=e}),u.ALo(2,"async"),u.ALo(3,"async"),u.qZA(),u.YNc(4,K,6,10,"ng-template",2)),2&e&&(u.xp6(1),u.Q6J("members",u.lcZ(2,4,t.customers$))("totalItems",u.lcZ(3,6,t.customersTotal$))("route",t.route)("selectedMemberIds",t.selectedCustomerIds))},directives:function(){return[d.q6K,Ot,d.nPI]},pipes:function(){return[$.Ov,Y.X$]},styles:[""],changeDetection:0}),Tt.ctorParameters=function(){return[{type:d.DoR}]};var _t=function(){function e(t){f(this,e),this.changeDetector=t,this.availableCountries=[]}return h(e,[{key:"ngOnInit",value:function(){var e=this;this.addressForm.valueChanges.subscribe(function(){return e.changeDetector.markForCheck()})}},{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.addressForm)}}]),e}();_t.\u0275fac=function(e){return new(e||_t)(u.Y36(u.sBO))},_t.\u0275cmp=u.Xpm({type:_t,selectors:[["vdr-address-detail-dialog"]],decls:3,vars:3,consts:[["vdrDialogTitle",""],[3,"formGroup","availableCountries","customFields"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(u.YNc(0,z,2,2,"ng-template",0),u._UZ(1,"vdr-address-form",1),u.YNc(2,ee,6,7,"ng-template",2)),2&e&&(u.xp6(1),u.Q6J("formGroup",t.addressForm)("availableCountries",t.availableCountries)("customFields",t.customFields))},directives:[d.q6K,d.CY4,L.JL,L.sg,d.nPI,$.O5],pipes:[Y.X$],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0}),_t.ctorParameters=function(){return[{type:u.sBO}]};var wt=function(){function e(t,r){f(this,e),this.modalService=t,this.changeDetector=r,this.availableCountries=[],this.editable=!0,this.setAsDefaultShipping=new u.vpe,this.setAsDefaultBilling=new u.vpe,this.deleteAddress=new u.vpe,this.dataDependenciesPopulated=new g.X(!1)}return h(e,[{key:"ngOnInit",value:function(){var e=this;this.addressForm.get("streetLine1").value||this.dataDependenciesPopulated.pipe((0,w.h)(function(e){return e}),(0,I.q)(1)).subscribe(function(){e.editAddress()})}},{key:"ngOnChanges",value:function(e){null!=this.customFields&&null!=this.availableCountries&&this.dataDependenciesPopulated.next(!0)}},{key:"getCountryName",value:function(e){if(!this.availableCountries)return"";var t=this.availableCountries.find(function(t){return t.code===e});return t?t.name:""}},{key:"setAsDefaultBillingAddress",value:function(){this.setAsDefaultBilling.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}},{key:"setAsDefaultShippingAddress",value:function(){this.setAsDefaultShipping.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}},{key:"delete",value:function(){this.deleteAddress.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}},{key:"editAddress",value:function(){var e=this;this.modalService.fromComponent(_t,{locals:{addressForm:this.addressForm,customFields:this.customFields,availableCountries:this.availableCountries},size:"md",closable:!0}).subscribe(function(){e.changeDetector.markForCheck()})}}]),e}();wt.\u0275fac=function(e){return new(e||wt)(u.Y36(d.Z7U),u.Y36(u.sBO))},wt.\u0275cmp=u.Xpm({type:wt,selectors:[["vdr-address-card"]],inputs:{availableCountries:"availableCountries",editable:"editable",addressForm:"addressForm",customFields:"customFields",isDefaultBilling:"isDefaultBilling",isDefaultShipping:"isDefaultShipping"},outputs:{setAsDefaultShipping:"setAsDefaultShipping",setAsDefaultBilling:"setAsDefaultBilling",deleteAddress:"deleteAddress"},features:[u.TTD],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"address-title"],["class","street-line",4,"ngIf"],[1,"default-controls"],["class","is-default p8",4,"ngIf"],[1,"card-block"],[1,"card-text"],[3,"address"],[1,"card-footer"],[3,"entity"],[4,"ngIf"],[1,"street-line"],[1,"is-default","p8"],["shape","truck"],["shape","credit-card"],[1,"btn","btn-sm","btn-link",3,"click"],["type","button","vdrDropdownTrigger","",1,"btn","btn-sm","btn-link"],["shape","caret down"],["vdrDropdownItem","",1,"button",3,"disabled","click"],[1,"dropdown-divider"],["type","button","vdrDropdownItem","",1,"delete-button",3,"click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&u.YNc(0,ie,14,7,"div",0),2&e&&u.Q6J("ngIf",t.addressForm.value)},directives:[$.O5,d.b28,d.Vqt,d.Ywx,G.qvL,d.JOL,d.UaT,d.N9E,d.HH4],pipes:[Y.X$],styles:["[_nghost-%COMP%]{display:block;max-width:360px}clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}.defaul-controls[_ngcontent-%COMP%]{display:flex}.is-default[_ngcontent-%COMP%]{margin:0;color:var(--color-success-500)}"],changeDetection:0}),wt.ctorParameters=function(){return[{type:d.Z7U},{type:u.sBO}]},wt.propDecorators={addressForm:[{type:u.IIB}],customFields:[{type:u.IIB}],availableCountries:[{type:u.IIB}],isDefaultBilling:[{type:u.IIB}],isDefaultShipping:[{type:u.IIB}],editable:[{type:u.IIB}],setAsDefaultShipping:[{type:u.r_U}],setAsDefaultBilling:[{type:u.r_U}],deleteAddress:[{type:u.r_U}]};var It=function(){function e(t){f(this,e),this.dataService=t,this.selectedGroupIds=[]}return h(e,[{key:"ngOnInit",value:function(){this.groups$=this.dataService.customer.getCustomerGroupList().mapStream(function(e){return e.customerGroups.items})}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedGroupIds)}}]),e}();It.\u0275fac=function(e){return new(e||It)(u.Y36(d.DoR))},It.\u0275cmp=u.Xpm({type:It,selectors:[["vdr-select-customer-group-dialog"]],decls:6,vars:8,consts:[["vdrDialogTitle",""],["appendTo","body","bindValue","id",3,"items","addTag","multiple","ngModel","clearable","searchable","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],["vdrDialogButtons",""],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[3,"colorFrom"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(u.YNc(0,se,2,3,"ng-template",0),u.TgZ(1,"ng-select",1),u.NdJ("ngModelChange",function(e){return t.selectedGroupIds=e}),u.ALo(2,"async"),u.YNc(3,ae,4,2,"ng-template",2),u.YNc(4,ce,2,2,"ng-template",3),u.qZA(),u.YNc(5,ue,6,10,"ng-template",4)),2&e&&(u.xp6(1),u.Q6J("items",u.lcZ(2,6,t.groups$))("addTag",!1)("multiple",!0)("ngModel",t.selectedGroupIds)("clearable",!0)("searchable",!1))},directives:[d.q6K,R.w9,L.JJ,L.On,R.bb,R.Z2,d.nPI,d.Ywx],pipes:[$.Ov,Y.X$],styles:[""],changeDetection:0}),It.ctorParameters=function(){return[{type:d.DoR}]};var Ut=function(e){c(r,e);var t=l(r);function r(e,n,o,i,s,c,u,l){var d;return f(this,r),(d=t.call(this,e,n,o,c)).changeDetector=i,d.formBuilder=s,d.dataService=c,d.modalService=u,d.notificationService=l,d.fetchHistory=new v.xQ,d.addressesToDeleteIds=new Set,d.addressDefaultsUpdated=!1,d.ordersPerPage=10,d.currentOrdersPage=1,d.orderListUpdates$=new v.xQ,d.customFields=d.getCustomFieldConfig("Customer"),d.addressCustomFields=d.getCustomFieldConfig("Address"),d.detailForm=d.formBuilder.group({customer:d.formBuilder.group({title:"",firstName:["",L.kI.required],lastName:["",L.kI.required],phoneNumber:"",emailAddress:["",[L.kI.required,L.kI.email]],password:"",customFields:d.formBuilder.group(d.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),a({},t.name,""))},{}))}),addresses:new L.Oe([])}),d}return h(r,[{key:"ngOnInit",value:function(){var e=this;this.init(),this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(function(e){return e.countries.items}).pipe((0,U.d)(1));var t=this.entity$.pipe(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return e.lift.call(C.T.apply(void 0,[e].concat(t)))}}(this.orderListUpdates$));this.orders$=t.pipe((0,_.U)(function(e){return e.orders.items})),this.ordersCount$=this.entity$.pipe((0,_.U)(function(e){return e.orders.totalItems})),this.history$=this.fetchHistory.pipe((0,q.O)(null),(0,T.w)(function(){return e.dataService.customer.getCustomerHistory(e.id,{sort:{createdAt:d.Asd.DESC}}).mapStream(function(e){var t;return null===(t=e.customer)||void 0===t?void 0:t.history.items})}))}},{key:"ngOnDestroy",value:function(){this.destroy(),this.orderListUpdates$.complete()}},{key:"getAddressFormControls",value:function(){return this.detailForm.get(["addresses"]).controls}},{key:"setDefaultBillingAddressId",value:function(e){this.defaultBillingAddressId=e,this.addressDefaultsUpdated=!0}},{key:"setDefaultShippingAddressId",value:function(e){this.defaultShippingAddressId=e,this.addressDefaultsUpdated=!0}},{key:"toggleDeleteAddress",value:function(e){this.addressesToDeleteIds.has(e)?this.addressesToDeleteIds.delete(e):this.addressesToDeleteIds.add(e)}},{key:"addAddress",value:function(){var e=this.detailForm.get("addresses"),t=this.formBuilder.group({fullName:"",company:"",streetLine1:["",L.kI.required],streetLine2:"",city:"",province:"",postalCode:"",countryCode:["",L.kI.required],phoneNumber:"",defaultShippingAddress:!1,defaultBillingAddress:!1});if(this.addressCustomFields.length){var r,n=this.formBuilder.group({}),i=o(this.addressCustomFields);try{for(i.s();!(r=i.n()).done;){var s=r.value;n.addControl(s.name,new L.NI(""))}}catch(a){i.e(a)}finally{i.f()}t.addControl("customFields",n)}e.push(t)}},{key:"setOrderItemsPerPage",value:function(e){this.ordersPerPage=+e,this.fetchOrdersList()}},{key:"setOrderCurrentPage",value:function(e){this.currentOrdersPage=+e,this.fetchOrdersList()}},{key:"create",value:function(){var e,t=this,r=this.detailForm.get("customer");if(r){var n=r.value,o=null===(e=r.get("customFields"))||void 0===e?void 0:e.value,i={title:n.title,emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName,phoneNumber:n.phoneNumber,customFields:o};this.dataService.customer.createCustomer(i,n.password).subscribe(function(e){var r=e.createCustomer;switch(r.__typename){case"Customer":t.notificationService.success((0,M.J)("common.notify-create-success"),{entity:"Customer"}),r.emailAddress&&!n.password&&t.notificationService.notify({message:(0,M.J)("customer.email-verification-sent"),translationVars:{emailAddress:n.emailAddress},type:"info",duration:1e4}),t.detailForm.markAsPristine(),t.addressDefaultsUpdated=!1,t.changeDetector.markForCheck(),t.router.navigate(["../",r.id],{relativeTo:t.route});break;case"EmailAddressConflictError":t.notificationService.error(r.message)}})}}},{key:"save",value:function(){var e=this;this.entity$.pipe((0,I.q)(1),(0,N.zg)(function(t){var r,n=t.id,i=[],s=e.detailForm.get("customer");if(s&&s.dirty){var a=s.value,c=null===(r=s.get("customFields"))||void 0===r?void 0:r.value,u={id:n,title:a.title,emailAddress:a.emailAddress,firstName:a.firstName,lastName:a.lastName,phoneNumber:a.phoneNumber,customFields:c};i.push(e.dataService.customer.updateCustomer(u).pipe((0,_.U)(function(e){return e.updateCustomer})))}var l=e.detailForm.get("addresses");if(l&&l.dirty||e.addressDefaultsUpdated){var d,m=o(l.controls);try{for(m.s();!(d=m.n()).done;){var p=d.value;if(p.dirty||e.addressDefaultsUpdated){var f=p.value,g={fullName:f.fullName,company:f.company,streetLine1:f.streetLine1,streetLine2:f.streetLine2,city:f.city,province:f.province,postalCode:f.postalCode,countryCode:f.countryCode,phoneNumber:f.phoneNumber,defaultShippingAddress:e.defaultShippingAddressId===f.id,defaultBillingAddress:e.defaultBillingAddressId===f.id,customFields:f.customFields};f.id?e.addressesToDeleteIds.has(f.id)?i.push(e.dataService.customer.deleteCustomerAddress(f.id).pipe((0,_.U)(function(e){return e.deleteCustomerAddress}))):i.push(e.dataService.customer.updateCustomerAddress(Object.assign(Object.assign({},g),{id:f.id})).pipe((0,_.U)(function(e){return e.updateCustomerAddress}))):i.push(e.dataService.customer.createCustomerAddress(n,g).pipe((0,_.U)(function(e){return e.createCustomerAddress})))}}}catch(h){m.e(h)}finally{m.f()}}return(0,y.D)(i)})).subscribe(function(t){var r,n=!1,i=o(t);try{for(i.s();!(r=i.n()).done;){var s=r.value;switch(s.__typename){case"Customer":case"Address":case"Success":n||(e.notificationService.success((0,M.J)("common.notify-update-success"),{entity:"Customer"}),n=!0,e.detailForm.markAsPristine(),e.addressDefaultsUpdated=!1,e.changeDetector.markForCheck(),e.fetchHistory.next(),e.dataService.customer.getCustomer(e.id).single$.subscribe());break;case"EmailAddressConflictError":e.notificationService.error(s.message)}}}catch(a){i.e(a)}finally{i.f()}},function(t){e.notificationService.error((0,M.J)("common.notify-update-error"),{entity:"Customer"})})}},{key:"addToGroup",value:function(){var e=this;this.modalService.fromComponent(It,{size:"md"}).pipe((0,T.w)(function(e){return e?(0,Z.D)(e):b.E}),(0,O.b)(function(t){return e.dataService.customer.addCustomersToGroup(t,[e.id])})).subscribe({next:function(t){e.notificationService.success((0,M.J)("customer.add-customers-to-group-success"),{customerCount:1,groupName:t.addCustomersToGroup.name})},complete:function(){e.dataService.customer.getCustomer(e.id,{take:0}).single$.subscribe(),e.fetchHistory.next()}})}},{key:"removeFromGroup",value:function(e){var t=this;this.modalService.dialog({title:(0,M.J)("customer.confirm-remove-customer-from-group"),buttons:[{type:"secondary",label:(0,M.J)("common.cancel")},{type:"danger",label:(0,M.J)("common.delete"),returnValue:!0}]}).pipe((0,T.w)(function(r){return r?t.dataService.customer.removeCustomersFromGroup(e.id,[t.id]):b.E}),(0,T.w)(function(){return t.dataService.customer.getCustomer(t.id,{take:0}).single$})).subscribe(function(r){t.notificationService.success((0,M.J)("customer.remove-customers-from-group-success"),{customerCount:1,groupName:e.name}),t.fetchHistory.next()})}},{key:"addNoteToCustomer",value:function(e){var t=this,r=e.note;this.dataService.customer.addNoteToCustomer(this.id,r).subscribe(function(){t.fetchHistory.next(),t.notificationService.success((0,M.J)("common.notify-create-success"),{entity:"Note"})})}},{key:"updateNote",value:function(e){var t=this;this.modalService.fromComponent(d.UlA,{closable:!0,locals:{displayPrivacyControls:!1,note:e.data.note}}).pipe((0,T.w)(function(r){return r?t.dataService.customer.updateCustomerNote({noteId:e.id,note:r.note}):b.E})).subscribe(function(e){t.fetchHistory.next(),t.notificationService.success((0,M.J)("common.notify-update-success"),{entity:"Note"})})}},{key:"deleteNote",value:function(e){var t=this;return this.modalService.dialog({title:(0,M.J)("common.confirm-delete-note"),body:e.data.note,buttons:[{type:"secondary",label:(0,M.J)("common.cancel")},{type:"danger",label:(0,M.J)("common.delete"),returnValue:!0}]}).pipe((0,T.w)(function(r){return r?t.dataService.customer.deleteCustomerNote(e.id):b.E})).subscribe(function(){t.fetchHistory.next(),t.notificationService.success((0,M.J)("common.notify-delete-success"),{entity:"Note"})})}},{key:"setFormValues",value:function(e){var t,r=this.detailForm.get("customer");if(r&&r.patchValue({title:e.title,firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber,emailAddress:e.emailAddress}),e.addresses){var n,i=new L.Oe([]),s=o(e.addresses);try{for(s.s();!(n=s.n()).done;){var a=n.value,c=a,u=(c.customFields,(0,F._T)(c,["customFields"])),l=this.formBuilder.group(Object.assign(Object.assign({},u),{countryCode:a.country.code}));if(i.push(l),a.defaultShippingAddress&&(this.defaultShippingAddressId=a.id),a.defaultBillingAddress&&(this.defaultBillingAddressId=a.id),this.addressCustomFields.length){var d,m=this.formBuilder.group({}),p=o(this.addressCustomFields);try{for(p.s();!(d=p.n()).done;){var f=d.value.name,g=null===(t=a.customFields)||void 0===t?void 0:t[f],h=new L.NI(g);m.addControl(f,h)}}catch(v){p.e(v)}finally{p.f()}l.addControl("customFields",m)}}}catch(v){s.e(v)}finally{s.f()}this.detailForm.setControl("addresses",i)}this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customer","customFields"]),e),this.changeDetector.markForCheck()}},{key:"fetchOrdersList",value:function(){var e=this;this.dataService.customer.getCustomer(this.id,{take:this.ordersPerPage,skip:(this.currentOrdersPage-1)*this.ordersPerPage,sort:{orderPlacedAt:d.Asd.DESC}}).single$.pipe((0,_.U)(function(e){return e.customer}),(0,w.h)(Q.notNullOrUndefined)).subscribe(function(t){return e.orderListUpdates$.next(t)})}}]),r}(d.UT_);Ut.\u0275fac=function(e){return new(e||Ut)(u.Y36(E.gz),u.Y36(E.F0),u.Y36(d.iHG),u.Y36(u.sBO),u.Y36(L.qu),u.Y36(d.DoR),u.Y36(d.Z7U),u.Y36(d.gqp))},Ut.\u0275cmp=u.Xpm({type:Ut,selectors:[["vdr-customer-detail"]],features:[u.qOj],decls:46,vars:59,consts:[[1,"flex","clr-align-items-center"],[3,"entity"],[3,"customer"],["class","last-login",3,"title",4,"ngIf"],["locationId","customer-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","title",3,"label","readOnlyToggle"],["id","title","type","text","formControlName","title"],["for","firstName",3,"label","readOnlyToggle"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label","readOnlyToggle"],["id","lastName","type","text","formControlName","lastName"],["for","emailAddress",3,"label","readOnlyToggle"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","phoneNumber",3,"label","readOnlyToggle"],["id","phoneNumber","type","text","formControlName","phoneNumber"],["for","password",3,"label",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["locationId","customer-detail",3,"entity$","detailForm"],["class","groups",4,"ngIf"],["class","clr-row",4,"ngIf"],[1,"last-login",3,"title"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["formGroupName","customFields"],["entityName","Customer",3,"customFields","customFieldsFormGroup"],[1,"groups"],[1,"clr-control-label"],[4,"ngIf","ngIfElse"],["noGroups",""],["class","btn btn-sm btn-secondary",3,"click",4,"vdrIfPermissions"],["icon","times",3,"colorFrom","iconClick",4,"ngFor","ngForOf"],["icon","times",3,"colorFrom","iconClick"],[1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],[1,"clr-row"],[1,"clr-col-md-4"],[3,"to-delete","availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","editable","setAsDefaultBilling","setAsDefaultShipping","deleteAddress",4,"ngFor","ngForOf"],["class","btn btn-secondary",3,"click",4,"vdrIfPermissions"],[1,"clr-col-md-8"],[3,"items","itemsPerPage","totalItems","currentPage","emptyStateLabel","itemsPerPageChange","pageChange"],[3,"availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","editable","setAsDefaultBilling","setAsDefaultShipping","deleteAddress"],[1,"btn","btn-secondary",3,"click"],[1,"left"],[1,"right"],["iconShape","shopping-cart",3,"label","linkTo"],[1,"clr-col-md-6"],[3,"customer","history","addNote","updateNote","deleteNote"]],template:function(e,t){if(1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u.TgZ(2,"div",0),u._UZ(3,"vdr-entity-info",1),u.ALo(4,"async"),u._UZ(5,"vdr-customer-status-label",2),u.ALo(6,"async"),u.YNc(7,le,5,10,"div",3),u.ALo(8,"async"),u.qZA(),u.qZA(),u.TgZ(9,"vdr-ab-right"),u._UZ(10,"vdr-action-bar-items",4),u.YNc(11,de,3,4,"button",5),u.ALo(12,"async"),u.YNc(13,pe,1,1,"ng-template",null,6,u.W1O),u.qZA(),u.qZA(),u.TgZ(15,"form",7),u.TgZ(16,"vdr-form-field",8),u.ALo(17,"translate"),u.ALo(18,"async"),u._UZ(19,"input",9),u.qZA(),u.TgZ(20,"vdr-form-field",10),u.ALo(21,"translate"),u.ALo(22,"async"),u._UZ(23,"input",11),u.qZA(),u.TgZ(24,"vdr-form-field",12),u.ALo(25,"translate"),u.ALo(26,"async"),u._UZ(27,"input",13),u.qZA(),u.TgZ(28,"vdr-form-field",14),u.ALo(29,"translate"),u.ALo(30,"async"),u._UZ(31,"input",15),u.qZA(),u.TgZ(32,"vdr-form-field",16),u.ALo(33,"translate"),u.ALo(34,"async"),u._UZ(35,"input",17),u.qZA(),u.YNc(36,fe,3,3,"vdr-form-field",18),u.ALo(37,"async"),u.YNc(38,he,5,6,"section",19),u._UZ(39,"vdr-custom-detail-component-host",20),u.qZA(),u.YNc(40,Ae,9,6,"div",21),u.ALo(41,"async"),u.YNc(42,Ie,29,31,"div",22),u.ALo(43,"async"),u.YNc(44,Ue,5,6,"div",22),u.ALo(45,"async")),2&e){var r,n,o=u.MAs(14);u.xp6(3),u.Q6J("entity",u.lcZ(4,23,t.entity$)),u.xp6(2),u.Q6J("customer",u.lcZ(6,25,t.entity$)),u.xp6(2),u.Q6J("ngIf",null==(r=u.lcZ(8,27,t.entity$))||null==r.user?null:r.user.lastLogin),u.xp6(4),u.Q6J("ngIf",u.lcZ(12,29,t.isNew$))("ngIfElse",o),u.xp6(4),u.Q6J("formGroup",t.detailForm.get("customer")),u.xp6(1),u.Q6J("label",u.lcZ(17,31,"customer.title"))("readOnlyToggle",!u.lcZ(18,33,t.isNew$)),u.xp6(4),u.Q6J("label",u.lcZ(21,35,"customer.first-name"))("readOnlyToggle",!u.lcZ(22,37,t.isNew$)),u.xp6(4),u.Q6J("label",u.lcZ(25,39,"customer.last-name"))("readOnlyToggle",!u.lcZ(26,41,t.isNew$)),u.xp6(4),u.Q6J("label",u.lcZ(29,43,"customer.email-address"))("readOnlyToggle",!u.lcZ(30,45,t.isNew$)),u.xp6(4),u.Q6J("label",u.lcZ(33,47,"customer.phone-number"))("readOnlyToggle",!u.lcZ(34,49,t.isNew$)),u.xp6(4),u.Q6J("ngIf",u.lcZ(37,51,t.isNew$)),u.xp6(2),u.Q6J("ngIf",t.customFields.length),u.xp6(1),u.Q6J("entity$",t.entity$)("detailForm",t.detailForm),u.xp6(1),u.Q6J("ngIf",null==(n=u.lcZ(41,53,t.entity$))?null:n.groups),u.xp6(2),u.Q6J("ngIf",!u.lcZ(43,55,t.isNew$)),u.xp6(2),u.Q6J("ngIf",!u.lcZ(45,57,t.isNew$))}},directives:function(){return[d.KkL,d.BND,d.Vqt,Jt,$.O5,d.mz,d.WWO,L._Y,L.JL,L.sg,d.hgI,d.y_K,L.Fj,L.JJ,L.u,d.CWh,d.HAh,L.x0,G.MgK,d.yc0,$.sg,d.Ywx,G.qvL,d.Qj_,d.Egy,wt,d.v_8,St]},pipes:function(){return[$.Ov,Y.X$,d.HbD,d.eGd,d.j$k,d.kgx]},styles:[".last-login[_ngcontent-%COMP%]{margin-left:6px;color:var(--color-grey-500)}.to-delete[_ngcontent-%COMP%]{opacity:.5}"],changeDetection:0}),Ut.ctorParameters=function(){return[{type:E.gz},{type:E.F0},{type:d.iHG},{type:u.sBO},{type:L.qu},{type:d.DoR},{type:d.Z7U},{type:d.gqp}]};var qt=function(){function e(t,r){f(this,e),this.serverConfigService=t,this.formBuilder=r,this.customFields=this.serverConfigService.getCustomFieldsFor("CustomerGroup")}return h(e,[{key:"ngOnInit",value:function(){var e;if(this.form=this.formBuilder.group({name:[this.group.name,L.kI.required],customFields:this.formBuilder.group(this.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),a({},t.name,""))},{}))}),this.customFields.length){var t,r=this.form.get("customFields"),n=o(this.customFields);try{for(n.s();!(t=n.n()).done;){var i=t.value.name,s=null===(e=this.group.customFields)||void 0===e?void 0:e[i],c=r.get(i);c&&c.patchValue(s)}}catch(u){n.e(u)}finally{n.f()}}}},{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.form.value)}}]),e}();qt.\u0275fac=function(e){return new(e||qt)(u.Y36(d.iHG),u.Y36(L.qu))},qt.\u0275cmp=u.Xpm({type:qt,selectors:[["vdr-customer-group-detail-dialog"]],decls:8,vars:9,consts:[["vdrDialogTitle",""],[3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["formGroupName","customFields",4,"ngIf"],["vdrDialogButtons",""],[4,"ngIf"],["formGroupName","customFields"],["entityName","CustomerGroup",3,"customFields","customFieldsFormGroup"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(u.YNc(0,Oe,2,2,"ng-template",0),u.TgZ(1,"form",1),u.TgZ(2,"vdr-form-field",2),u.ALo(3,"translate"),u._UZ(4,"input",3),u.ALo(5,"hasPermission"),u.qZA(),u.YNc(6,ke,5,5,"section",4),u.qZA(),u.YNc(7,Je,6,6,"ng-template",5)),2&e&&(u.xp6(1),u.Q6J("formGroup",t.form),u.xp6(1),u.Q6J("label",u.lcZ(3,4,"common.name")),u.xp6(2),u.Q6J("readonly",!u.lcZ(5,6,u.DdM(8,De))),u.xp6(2),u.Q6J("ngIf",t.customFields.length))},directives:[d.q6K,L._Y,L.JL,L.sg,d.hgI,d.y_K,L.Fj,L.JJ,L.u,$.O5,d.nPI,L.x0,G.MgK,d.yc0],pipes:[Y.X$,d.j$k],styles:[""],changeDetection:0}),qt.ctorParameters=function(){return[{type:d.iHG},{type:L.qu}]};var Nt=function(e){c(o,e);var n=l(o);function o(e,t,i,s,a){var c,u;return f(this,o),(u=n.call(this,a,s)).dataService=e,u.notificationService=t,u.modalService=i,u.route=s,u.router=a,u.searchTerm=new L.NI(""),u.selectedCustomerIds=[],u.fetchGroupMembers$=new g.X({skip:0,take:0,filterTerm:""}),u.refreshActiveGroupMembers$=new g.X(void 0),r((c=m(u),p(o.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=u.dataService.customer).getCustomerGroupList.apply(e,arguments).refetchOnChannelChange()},function(e){return e.customerGroups},function(e,t){return{options:{skip:e,take:t,filter:{name:{contains:u.searchTerm.value}}}}}),u}return h(o,[{key:"ngOnInit",value:function(){var e=this;r(p(o.prototype),"ngOnInit",this).call(this),this.searchTerm.valueChanges.pipe((0,w.h)(function(e){return 2<e.length||0===e.length}),(0,k.b)(250),(0,S.R)(this.destroy$)).subscribe(function(){return e.refresh()});var n=this.route.paramMap.pipe((0,_.U)(function(e){return e.get("contents")}),(0,P.x)(),(0,J.b)(function(){return e.selectedCustomerIds=[]}));this.listIsEmpty$=this.items$.pipe((0,_.U)(function(e){return 0===e.length})),this.activeGroup$=(0,A.aj)(this.items$,n).pipe((0,_.U)(function(e){var r=t(e,2),n=r[0],o=r[1];if(o)return n.find(function(e){return e.id===o})}),(0,J.b)(function(t){return e.activeGroupId=null==t?void 0:t.id}));var i=(0,A.aj)(this.activeGroup$,this.fetchGroupMembers$,this.refreshActiveGroupMembers$).pipe((0,T.w)(function(r){var n=t(r,2),o=n[0],i=n[1],s=i.skip,a=i.take,c=i.filterTerm;return o?e.dataService.customer.getCustomerGroupWithCustomers(o.id,{skip:s,take:a,filter:{emailAddress:{contains:c}}}).mapStream(function(e){var t;return null===(t=e.customerGroup)||void 0===t?void 0:t.customers}):(0,x.of)(void 0)}));this.members$=i.pipe((0,_.U)(function(e){var t;return null!==(t=null==e?void 0:e.items)&&void 0!==t?t:[]})),this.membersTotal$=i.pipe((0,_.U)(function(e){var t;return null!==(t=null==e?void 0:e.totalItems)&&void 0!==t?t:0}))}},{key:"create",value:function(){var e=this;this.modalService.fromComponent(qt,{locals:{group:{name:""}}}).pipe((0,T.w)(function(t){return t?e.dataService.customer.createCustomerGroup(Object.assign(Object.assign({},t),{customerIds:[]})):b.E})).subscribe(function(){e.refresh(),e.notificationService.success((0,M.J)("common.notify-create-success"),{entity:"CustomerGroup"})},function(t){e.notificationService.error((0,M.J)("common.notify-create-error"),{entity:"CustomerGroup"})})}},{key:"delete",value:function(e){var t=this;this.modalService.dialog({title:(0,M.J)("customer.confirm-delete-customer-group"),buttons:[{type:"secondary",label:(0,M.J)("common.cancel")},{type:"danger",label:(0,M.J)("common.delete"),returnValue:!0}]}).pipe((0,T.w)(function(r){return r?t.dataService.customer.deleteCustomerGroup(e):b.E}),(0,T.w)(function(e){return e.deleteCustomerGroup.result===d.PcR.DELETED?t.dataService.customer.getCustomerGroupList().mapSingle(function(){return{errorMessage:!1}}):(0,x.of)({errorMessage:e.deleteCustomerGroup.message})})).subscribe(function(e){"string"==typeof e.errorMessage?t.notificationService.error(e.errorMessage):(t.refresh(),t.notificationService.success((0,M.J)("common.notify-delete-success"),{entity:"CustomerGroup"}))},function(e){t.notificationService.error((0,M.J)("common.notify-delete-error"),{entity:"CustomerGroup"})})}},{key:"update",value:function(e){var t=this;this.modalService.fromComponent(qt,{locals:{group:e}}).pipe((0,T.w)(function(r){return r?t.dataService.customer.updateCustomerGroup(Object.assign({id:e.id},r)):b.E})).subscribe(function(){t.refresh(),t.notificationService.success((0,M.J)("common.notify-update-success"),{entity:"CustomerGroup"})},function(e){t.notificationService.error((0,M.J)("common.notify-update-error"),{entity:"CustomerGroup"})})}},{key:"closeMembers",value:function(){var e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}},{key:"addToGroup",value:function(e){var t=this;this.modalService.fromComponent(Tt,{locals:{group:e,route:this.route},size:"md",verticalAlign:"top"}).pipe((0,T.w)(function(r){return r?t.dataService.customer.addCustomersToGroup(e.id,r).pipe((0,D.h)(r)):b.E})).subscribe({next:function(r){t.notificationService.success((0,M.J)("customer.add-customers-to-group-success"),{customerCount:r.length,groupName:e.name}),t.refreshActiveGroupMembers$.next(),t.selectedCustomerIds=[]}})}},{key:"removeFromGroup",value:function(e,t){var r=this;this.dataService.customer.removeCustomersFromGroup(e.id,t).subscribe({complete:function(){r.notificationService.success((0,M.J)("customer.remove-customers-from-group-success"),{customerCount:t.length,groupName:e.name}),r.refreshActiveGroupMembers$.next(),r.selectedCustomerIds=[]}})}}]),o}(d.t7C);Nt.\u0275fac=function(e){return new(e||Nt)(u.Y36(d.DoR),u.Y36(d.gqp),u.Y36(d.Z7U),u.Y36(E.gz),u.Y36(E.F0))},Nt.\u0275cmp=u.Xpm({type:Nt,selectors:[["vdr-customer-group-list"]],features:[u.qOj],decls:22,vars:28,consts:[["type","text","name","emailSearchTerm",1,"search-input",3,"formControl","placeholder"],["locationId","customer-group-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"group-wrapper"],[1,"group-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],["emptyPlaceholder",""],[1,"group-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"right","align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],[1,"align-middle"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[3,"members","route","totalItems","selectedMemberIds","selectionChange","fetchParamsChange"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"input",0),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,Fe,4,3,"button",2),u.qZA(),u.qZA(),u.TgZ(7,"div",3),u.TgZ(8,"div",4),u.TgZ(9,"vdr-data-table",5),u.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),u.ALo(10,"async"),u.ALo(11,"async"),u.ALo(12,"async"),u.ALo(13,"async"),u.ALo(14,"async"),u.YNc(15,Me,27,33,"ng-template"),u.qZA(),u.qZA(),u.YNc(16,Qe,1,0,"ng-template",null,6,u.W1O),u.TgZ(18,"div",7),u.ALo(19,"async"),u.YNc(20,je,26,31,"ng-container",8),u.ALo(21,"async"),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("formControl",t.searchTerm)("placeholder",u.lcZ(3,12,"customer.search-by-group-name")),u.xp6(4),u.Q6J("vdrIfPermissions","CreateCustomerGroup"),u.xp6(3),u.ekj("expanded",u.lcZ(10,14,t.activeGroup$)),u.Q6J("items",u.lcZ(11,16,t.items$))("itemsPerPage",u.lcZ(12,18,t.itemsPerPage$))("totalItems",u.lcZ(13,20,t.totalItems$))("currentPage",u.lcZ(14,22,t.currentPage$)),u.xp6(9),u.ekj("expanded",u.lcZ(19,24,t.activeGroup$)),u.xp6(2),u.Q6J("ngIf",u.lcZ(21,26,t.activeGroup$)))},directives:function(){return[d.KkL,d.BND,d.y_K,L.Fj,L.JJ,L.oH,d.mz,d.WWO,d.HAh,d.Qj_,$.O5,G.qvL,d.Vqt,d.Ywx,E.yS,d.JOL,d.UaT,d.N9E,d.HH4,d.jw0,Ot]},pipes:function(){return[Y.X$,$.Ov,d.j$k]},styles:[".group-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:var(--clr-global-selection-color)}.group-wrapper[_ngcontent-%COMP%]   .group-list.expanded[_ngcontent-%COMP%]{width:calc(100% - 40vw)}vdr-data-table[_ngcontent-%COMP%]     table{margin-top:0}.group-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.group-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.group-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.group-members[_ngcontent-%COMP%]     table.table{margin-top:0}.group-members[_ngcontent-%COMP%]     table.table th{top:0}.group-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}vdr-empty-placeholder[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),Nt.ctorParameters=function(){return[{type:d.DoR},{type:d.gqp},{type:d.Z7U},{type:E.gz},{type:E.F0}]};var Ot=function(){function r(e,t){var n=this;f(this,r),this.router=e,this.dataService=t,this.selectedMemberIds=[],this.selectionChange=new u.vpe,this.fetchParamsChange=new u.vpe,this.filterTermControl=new L.NI(""),this.refresh$=new g.X(!0),this.destroy$=new v.xQ,this.isMemberSelected=function(e){return-1<n.selectedMemberIds.indexOf(e.id)}}return h(r,[{key:"ngOnInit",value:function(){var e=this;this.membersCurrentPage$=this.route.paramMap.pipe((0,_.U)(function(e){return e.get("membersPage")}),(0,_.U)(function(e){return e?+e:1}),(0,q.O)(1),(0,P.x)()),this.membersItemsPerPage$=this.route.paramMap.pipe((0,_.U)(function(e){return e.get("membersPerPage")}),(0,_.U)(function(e){return e?+e:10}),(0,q.O)(10),(0,P.x)());var r=this.filterTermControl.valueChanges.pipe((0,k.b)(250),(0,J.b)(function(){return e.setContentsPageNumber(1)}),(0,q.O)(""));(0,A.aj)(this.membersCurrentPage$,this.membersItemsPerPage$,r,this.refresh$).pipe((0,S.R)(this.destroy$)).subscribe(function(r){var n=t(r,3),o=n[0],i=n[1],s=n[2],a=i,c=(o-1)*i;e.fetchParamsChange.emit({filterTerm:s,skip:c,take:a})})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"setContentsPageNumber",value:function(e){this.setParam("membersPage",e)}},{key:"setContentsItemsPerPage",value:function(e){this.setParam("membersPerPage",e)}},{key:"refresh",value:function(){this.refresh$.next(!0)}},{key:"setParam",value:function(e,t){this.router.navigate(["./",Object.assign(Object.assign({},this.route.snapshot.params),a({},e,t))],{relativeTo:this.route,queryParamsHandling:"merge"})}},{key:"areAllSelected",value:function(){return!!this.members&&this.selectedMemberIds.length===this.members.length}},{key:"toggleSelectAll",value:function(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(function(e){return e.id}))}},{key:"toggleSelectMember",value:function(t){var r=t.item;this.selectedMemberIds.includes(r.id)?this.selectionChange.emit(this.selectedMemberIds.filter(function(e){return e!==r.id})):this.selectionChange.emit([].concat(e(this.selectedMemberIds),[r.id]))}}]),r}();Ot.\u0275fac=function(e){return new(e||Ot)(u.Y36(E.F0),u.Y36(d.DoR))},Ot.\u0275cmp=u.Xpm({type:Ot,selectors:[["vdr-customer-group-member-list"]],inputs:{selectedMemberIds:"selectedMemberIds",members:"members",totalItems:"totalItems",route:"route"},outputs:{selectionChange:"selectionChange",fetchParamsChange:"fetchParamsChange"},decls:14,vars:24,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],[3,"items","itemsPerPage","totalItems","currentPage","allSelected","isRowSelectedFn","pageChange","itemsPerPageChange","rowSelectChange","allSelectChange"],[3,"expand"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(u._UZ(0,"input",0),u.ALo(1,"translate"),u.TgZ(2,"vdr-data-table",1),u.NdJ("pageChange",function(e){return t.setContentsPageNumber(e)})("itemsPerPageChange",function(e){return t.setContentsItemsPerPage(e)})("rowSelectChange",function(e){return t.toggleSelectMember(e)})("allSelectChange",function(){return t.toggleSelectAll()}),u.ALo(3,"async"),u.ALo(4,"async"),u.ALo(5,"hasPermission"),u.TgZ(6,"vdr-dt-column",2),u._uU(7),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"vdr-dt-column",2),u._uU(10),u.ALo(11,"translate"),u.qZA(),u._UZ(12,"vdr-dt-column"),u.YNc(13,Ye,7,10,"ng-template"),u.qZA()),2&e&&(u.Q6J("formControl",t.filterTermControl)("placeholder",u.lcZ(1,12,"customer.search-customers-by-email")),u.xp6(2),u.Q6J("items",t.members)("itemsPerPage",u.lcZ(3,14,t.membersItemsPerPage$))("totalItems",t.totalItems)("currentPage",u.lcZ(4,16,t.membersCurrentPage$))("allSelected",t.areAllSelected())("isRowSelectedFn",u.lcZ(5,18,"UpdateCustomerGroup")&&t.isMemberSelected),u.xp6(4),u.Q6J("expand",!0),u.xp6(1),u.Oqu(u.lcZ(8,20,"customer.name")),u.xp6(2),u.Q6J("expand",!0),u.xp6(1),u.Oqu(u.lcZ(11,22,"customer.email-address")))},directives:[d.y_K,L.Fj,L.JJ,L.oH,d.Qj_,d.Egy,d.v_8],pipes:[Y.X$,$.Ov,d.j$k],styles:[""],changeDetection:0}),Ot.ctorParameters=function(){return[{type:E.F0},{type:d.DoR}]},Ot.propDecorators={members:[{type:u.IIB}],totalItems:[{type:u.IIB}],route:[{type:u.IIB}],selectedMemberIds:[{type:u.IIB}],selectionChange:[{type:u.r_U}],fetchParamsChange:[{type:u.r_U}]};var kt=function(){function e(t,r){f(this,e),this.componentFactoryResolver=t,this.historyEntryComponentService=r,this.expandClick=new u.vpe}return h(e,[{key:"ngOnInit",value:function(){var e=this.historyEntryComponentService.getComponent(this.entry.type),t=this.componentFactoryResolver.resolveComponentFactory(e),r=this.portalRef.createComponent(t);r.instance.entry=this.entry,r.instance.customer=this.customer,this.instance=r.instance,this.componentRef=r}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.componentRef)||void 0===e||e.destroy()}}]),e}();kt.\u0275fac=function(e){return new(e||kt)(u.Y36(u._Vd),u.Y36(d.GwB))},kt.\u0275cmp=u.Xpm({type:kt,selectors:[["vdr-customer-history-entry-host"]],viewQuery:function(e,t){var r;(1&e&&u.Gf(Ge,7,u.s_b),2&e)&&(u.iGM(r=u.CRH())&&(t.portalRef=r.first))},inputs:{entry:"entry",customer:"customer",expanded:"expanded"},outputs:{expandClick:"expandClick"},exportAs:["historyEntry"],decls:3,vars:6,consts:[[3,"displayType","iconShape","createdAt","name","featured","collapsed","expandClick"],["portal",""]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-timeline-entry",0),u.NdJ("expandClick",function(){return t.expandClick.emit()}),u._UZ(1,"div",null,1),u.qZA()),2&e&&u.Q6J("displayType",t.instance.getDisplayType(t.entry))("iconShape",t.instance.getIconShape&&t.instance.getIconShape(t.entry))("createdAt",t.entry.createdAt)("name",t.instance.getName&&t.instance.getName(t.entry))("featured",t.instance.isFeatured(t.entry))("collapsed",!t.expanded&&!t.instance.isFeatured(t.entry))},directives:[d._hU],encapsulation:2}),kt.ctorParameters=function(){return[{type:u._Vd},{type:d.GwB}]},kt.propDecorators={entry:[{type:u.IIB}],customer:[{type:u.IIB}],expanded:[{type:u.IIB}],expandClick:[{type:u.r_U}],portalRef:[{type:u.i9L,args:["portal",{static:!0,read:u.s_b}]}]};var St=function(){function e(t){f(this,e),this.historyEntryComponentService=t,this.addNote=new u.vpe,this.updateNote=new u.vpe,this.deleteNote=new u.vpe,this.note="",this.expanded=!1,this.type=d.iYD}return h(e,[{key:"hasCustomComponent",value:function(e){return!!this.historyEntryComponentService.getComponent(e)}},{key:"getDisplayType",value:function(e){switch(e.type){case d.iYD.CUSTOMER_VERIFIED:case d.iYD.CUSTOMER_EMAIL_UPDATE_VERIFIED:case d.iYD.CUSTOMER_PASSWORD_RESET_VERIFIED:return"success";case d.iYD.CUSTOMER_REGISTERED:return"muted";case d.iYD.CUSTOMER_REMOVED_FROM_GROUP:return"error";default:return"default"}}},{key:"getTimelineIcon",value:function(e){switch(e.type){case d.iYD.CUSTOMER_REGISTERED:return"user";case d.iYD.CUSTOMER_VERIFIED:return["assign-user","is-solid"];case d.iYD.CUSTOMER_NOTE:return"note";case d.iYD.CUSTOMER_ADDED_TO_GROUP:case d.iYD.CUSTOMER_REMOVED_FROM_GROUP:return"users"}}},{key:"isFeatured",value:function(e){switch(e.type){case d.iYD.CUSTOMER_REGISTERED:case d.iYD.CUSTOMER_VERIFIED:return!0;default:return!1}}},{key:"getName",value:function(e){var t=e.administrator;return t?"".concat(t.firstName," ").concat(t.lastName):"".concat(this.customer.firstName," ").concat(this.customer.lastName)}},{key:"addNoteToCustomer",value:function(){this.addNote.emit({note:this.note}),this.note=""}}]),e}();St.\u0275fac=function(e){return new(e||St)(u.Y36(d.GwB))},St.\u0275cmp=u.Xpm({type:St,selectors:[["vdr-customer-history"]],inputs:{customer:"customer",history:"history"},outputs:{addNote:"addNote",updateNote:"updateNote",deleteNote:"deleteNote"},decls:7,vars:6,consts:[[1,"entry-list"],["iconShape","note","displayType","muted",4,"vdrIfPermissions"],[4,"ngFor","ngForOf"],[3,"isLast"],["iconShape","note","displayType","muted"],[1,"note-entry"],["name","note",1,"note",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"disabled","click"],[3,"customer","entry","expanded","expandClick",4,"ngIf","ngIfElse"],["defaultComponents",""],[3,"customer","entry","expanded","expandClick"],[3,"displayType","iconShape","createdAt","name","featured"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"title"],[4,"ngIf","ngIfElse"],["namedStrategy",""],[1,"flex"],[3,"value"],[1,"address-string"],[3,"label"],[1,"note-text"],[1,"flex-spacer"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","edit"],[1,"dropdown-divider"],["shape","trash",1,"is-danger"],[4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"h4"),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.TgZ(3,"div",0),u.YNc(4,Re,6,5,"vdr-timeline-entry",1),u.YNc(5,ht,4,2,"ng-container",2),u._UZ(6,"vdr-timeline-entry",3),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,4,"customer.customer-history")),u.xp6(3),u.Q6J("vdrIfPermissions","UpdateCustomer"),u.xp6(1),u.Q6J("ngForOf",t.history),u.xp6(1),u.Q6J("isLast",!0))},directives:[d.HAh,$.sg,d._hU,d.y_K,L.Fj,L.JJ,L.On,$.O5,kt,$.RF,$.n9,$.ED,d.CS9,d._8q,d.WGc,d.JOL,d.UaT,G.qvL,d.N9E,d.HH4],pipes:[Y.X$,d.j$k],styles:[".entry-list[_ngcontent-%COMP%]{margin-top:24px;margin-left:24px;margin-right:12px}.note-entry[_ngcontent-%COMP%]{display:flex;align-items:center}.note-entry[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{flex:1}.note-entry[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}textarea.note[_ngcontent-%COMP%]{flex:1;height:36px;border-radius:3px;margin-right:6px}.note-text[_ngcontent-%COMP%]{color:var(--color-text-100);white-space:pre-wrap}.address-string[_ngcontent-%COMP%]{font-size:smaller;color:var(--color-text-200)}"],changeDetection:0}),St.ctorParameters=function(){return[{type:d.GwB}]},St.propDecorators={customer:[{type:u.IIB}],history:[{type:u.IIB}],addNote:[{type:u.r_U}],updateNote:[{type:u.r_U}],deleteNote:[{type:u.r_U}]};var Pt=function(e){c(n,e);var t=l(n);function n(e,o,i,s,a){var c,u;return f(this,n),(u=t.call(this,o,i)).dataService=e,u.modalService=s,u.notificationService=a,u.searchTerm=new L.NI(""),r((c=m(u),p(n.prototype)),"setQueryFn",c).call(c,function(){var e;return(e=u.dataService.customer).getCustomerList.apply(e,arguments).refetchOnChannelChange()},function(e){return e.customers},function(e,t){return{options:{skip:e,take:t,filter:{emailAddress:{contains:u.searchTerm.value},lastName:{contains:u.searchTerm.value},postalCode:{contains:u.searchTerm.value}},filterOperator:d.FnJ.OR,sort:{createdAt:j.As.DESC}}}}),u}return h(n,[{key:"ngOnInit",value:function(){var e=this;r(p(n.prototype),"ngOnInit",this).call(this),this.searchTerm.valueChanges.pipe((0,w.h)(function(e){return 2<e.length||0===e.length}),(0,k.b)(250),(0,S.R)(this.destroy$)).subscribe(function(){return e.refresh()})}},{key:"deleteCustomer",value:function(e){var t=this;return this.modalService.dialog({title:(0,M.J)("catalog.confirm-delete-customer"),body:"".concat(e.firstName," ").concat(e.lastName),buttons:[{type:"secondary",label:(0,M.J)("common.cancel")},{type:"danger",label:(0,M.J)("common.delete"),returnValue:!0}]}).pipe((0,T.w)(function(r){return r?t.dataService.customer.deleteCustomer(e.id):b.E})).subscribe(function(){t.notificationService.success((0,M.J)("common.notify-delete-success"),{entity:"Customer"}),t.refresh()},function(e){t.notificationService.error((0,M.J)("common.notify-delete-error"),{entity:"Customer"})})}}]),n}(d.t7C);Pt.\u0275fac=function(e){return new(e||Pt)(u.Y36(d.DoR),u.Y36(E.F0),u.Y36(E.gz),u.Y36(d.Z7U),u.Y36(d.gqp))},Pt.\u0275cmp=u.Xpm({type:Pt,selectors:[["vdr-customer-list"]],features:[u.qOj],decls:24,vars:28,consts:[["type","text","name","emailSearchTerm",1,"search-input",3,"formControl","placeholder"],["locationId","customer-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"customer"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(u.TgZ(0,"vdr-action-bar"),u.TgZ(1,"vdr-ab-left"),u._UZ(2,"input",0),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"vdr-ab-right"),u._UZ(5,"vdr-action-bar-items",1),u.YNc(6,yt,4,5,"a",2),u.qZA(),u.qZA(),u.TgZ(7,"vdr-data-table",3),u.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),u.ALo(8,"async"),u.ALo(9,"async"),u.ALo(10,"async"),u.ALo(11,"async"),u.TgZ(12,"vdr-dt-column",4),u._uU(13),u.ALo(14,"translate"),u.qZA(),u.TgZ(15,"vdr-dt-column",4),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.TgZ(18,"vdr-dt-column"),u._uU(19),u.ALo(20,"translate"),u.qZA(),u._UZ(21,"vdr-dt-column"),u._UZ(22,"vdr-dt-column"),u.YNc(23,Zt,21,20,"ng-template"),u.qZA()),2&e&&(u.xp6(2),u.Q6J("formControl",t.searchTerm)("placeholder",u.lcZ(3,12,"customer.search-customers-by-email-last-name-postal-code")),u.xp6(4),u.Q6J("vdrIfPermissions","CreateCustomer"),u.xp6(1),u.Q6J("items",u.lcZ(8,14,t.items$))("itemsPerPage",u.lcZ(9,16,t.itemsPerPage$))("totalItems",u.lcZ(10,18,t.totalItems$))("currentPage",u.lcZ(11,20,t.currentPage$)),u.xp6(5),u.Q6J("expand",!0),u.xp6(1),u.Oqu(u.lcZ(14,22,"customer.name")),u.xp6(2),u.Q6J("expand",!0),u.xp6(1),u.Oqu(u.lcZ(17,24,"customer.email-address")),u.xp6(3),u.Oqu(u.lcZ(20,26,"customer.customer-type")))},directives:function(){return[d.KkL,d.BND,d.y_K,L.Fj,L.JJ,L.oH,d.mz,d.WWO,d.HAh,d.Qj_,d.Egy,E.yS,G.qvL,Jt,d.v_8,d.JOL,d.UaT,d.N9E,d.HH4]},pipes:function(){return[Y.X$,$.Ov,d.j$k]},styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"]}),Pt.ctorParameters=function(){return[{type:d.DoR},{type:E.F0},{type:E.gz},{type:d.Z7U},{type:d.gqp}]};var Jt=h(function e(){f(this,e)});Jt.\u0275fac=function(e){return new(e||Jt)},Jt.\u0275cmp=u.Xpm({type:Jt,selectors:[["vdr-customer-status-label"]],inputs:{customer:"customer"},decls:2,vars:2,consts:[[4,"ngIf"],["shape","check-circle",1,"verified-user-icon"],["shape","check-circle",1,"registered-user-icon"]],template:function(e,t){1&e&&(u.YNc(0,xt,3,2,"vdr-chip",0),u.YNc(1,Ct,3,3,"vdr-chip",0)),2&e&&(u.Q6J("ngIf",null==t.customer.user?null:t.customer.user.id),u.xp6(1),u.Q6J("ngIf",!(null!=t.customer.user&&t.customer.user.id)))},directives:[$.O5,d.Ywx,G.qvL],pipes:[Y.X$],styles:[".registered-user-icon[_ngcontent-%COMP%]{color:var(--color-grey-300)}.verified-user-icon[_ngcontent-%COMP%]{color:var(--color-success-500)}"],changeDetection:0}),Jt.propDecorators={customer:[{type:u.IIB}]};var Dt=function(e){c(r,e);var t=l(r);function r(e,n){return f(this,r),t.call(this,e,{__typename:"Customer",id:"",createdAt:"",updatedAt:"",title:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:null,addresses:null,user:null},function(e){return n.customer.getCustomer(e,{take:10,sort:{orderPlacedAt:d.Asd.DESC}}).mapStream(function(e){return e.customer})})}return h(r)}(d.p_9);Dt.\u0275fac=function(e){return new(e||Dt)(u.LFG(E.F0),u.LFG(d.DoR))},Dt.\u0275prov=u.Yz7({factory:function(){return new Dt(u.LFG(E.F0),u.LFG(d.DoR))},token:Dt,providedIn:"root"}),Dt.ctorParameters=function(){return[{type:E.F0},{type:d.DoR}]};var Ft={breadcrumb:(0,M.J)("breadcrumb.customers")},Lt={breadcrumb:Qt},Et={breadcrumb:(0,M.J)("breadcrumb.customer-groups")},Mt=[{path:"customers",component:Pt,pathMatch:"",data:Ft},{path:"customers/:id",component:Ut,resolve:(0,d.Po4)(Dt),canDeactivate:[d.TSp],data:Lt},{path:"groups",component:Nt,data:Et}];function Qt(e,t){return(0,d.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.customers",getName:function(e){return"".concat(e.firstName," ").concat(e.lastName)},route:"customers"})}var jt=h(function e(){f(this,e)});jt.\u0275fac=function(e){return new(e||jt)},jt.\u0275mod=u.oAB({type:jt}),jt.\u0275inj=u.cJS({imports:[[d.m81,E.Bz.forChild(Mt)]]})}}])}();
//# sourceMappingURL=778-es5.5cac14693500bc186084.js.map