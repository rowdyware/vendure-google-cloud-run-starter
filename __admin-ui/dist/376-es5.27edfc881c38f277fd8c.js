!function(){"use strict";function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,(i=r.key,o=void 0,"symbol"==typeof(o=function(n,e){if("object"!=typeof n||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var r=t.call(n,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(i,"string"))?o:String(o)),r)}var i,o}function t(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(self.webpackChunkvendure_admin_ui=self.webpackChunkvendure_admin_ui||[]).push([[376],{56376:function(e,r,i){i.r(r),i.d(r,{LoginComponent:function(){return x},LoginGuard:function(){return P},LoginModule:function(){return v},loginRoutes:function(){return O}});var o=i(51169),a=i(71029),g=i(20233),p=i(20576),l=i(98370),c=i(79183),s=i(76456),m=i(36508),u=i(70060);function d(n,e){if(1&n&&(a.TgZ(0,"p",22),a._uU(1,"Photo by "),a.TgZ(2,"a",23),a._uU(3),a.qZA(),a._uU(4," on "),a.TgZ(5,"a",23),a._uU(6,"Unsplash"),a.qZA(),a.qZA()),2&n){var t=a.oxw();a.xp6(2),a.Q6J("href",t.imageCreatorUrl,a.LSH),a.xp6(1),a.Oqu(t.imageCreator),a.xp6(2),a.Q6J("href",t.imageUnsplashUrl,a.LSH)}}function h(n,e){if(1&n&&(a.TgZ(0,"p",24),a._uU(1),a.qZA()),2&n){var t=a.oxw();a.xp6(1),a.Oqu(t.imageLocation)}}function f(n,e){if(1&n&&a._UZ(0,"img",25),2&n){var t=a.oxw();a.Q6J("src",t.imageUrl,a.LSH)("alt",t.imageUrl)}}function w(n,e){1&n&&(a.TgZ(0,"span"),a._uU(1,"-"),a.qZA())}function _(n,e){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.YNc(2,w,2,0,"span",20),a.qZA()),2&n){var t=a.oxw();a.xp6(1),a.hij("",t.brand," "),a.xp6(1),a.Q6J("ngIf",!t.hideVendureBranding||!t.hideVersion)}}function C(n,e){1&n&&(a.TgZ(0,"span"),a._uU(1,"vendure"),a.qZA())}function M(n,e){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){var t=a.oxw();a.xp6(1),a.hij("v",t.version,"")}}var x=function(){function e(t,r,i){n(this,e),this.authService=t,this.router=r,this.httpClient=i,this.username="",this.password="",this.rememberMe=!1,this.version=p.s5M,this.brand=(0,p.hq7)().brand,this.hideVendureBranding=(0,p.hq7)().hideVendureBranding,this.hideVersion=(0,p.hq7)().hideVersion,this.customImageUrl=(0,p.hq7)().loginImageUrl,this.imageUrl="",this.imageUnsplashUrl="",this.imageLocation="",this.imageCreator="",this.imageCreatorUrl="",this.customImageUrl?this.imageUrl=this.customImageUrl:this.loadImage()}return t(e,[{key:"logIn",value:function(){var n=this;this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(function(e){switch(e.__typename){case"CurrentUser":var t=n.getRedirectRoute();n.router.navigateByUrl(t||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":n.errorMessage=e.message}})}},{key:"loadImage",value:function(){var n=this;this.httpClient.get("https://login-image.vendure.io").toPromise().then(function(e){n.updateImage(e)})}},{key:"updateImage",value:function(n){var e=n.user,t=n.location;this.imageUrl=n.urls.regular+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageCreator=e.name,this.imageLocation=t.name,this.imageCreatorUrl=e.links.html+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageUnsplashUrl=n.links.html}},{key:"getRedirectRoute",value:function(){var n,e=new RegExp("".concat(p.ONw,"=(.*)"));try{var t=window.location.search.match(e);t&&1<t.length&&(n=atob(decodeURIComponent(t[1])))}catch(t){}return n}}]),e}();x.\u0275fac=function(n){return new(n||x)(a.Y36(p.e80),a.Y36(g.F0),a.Y36(o.eN))},x.\u0275cmp=a.Xpm({type:x,selectors:[["vdr-login"]],decls:38,vars:33,consts:[[1,"login-wrapper"],[1,"login-wrapper-inner"],[1,"login-wrapper-image"],[1,"login-wrapper-image-content"],[1,"login-wrapper-image-title"],[1,"login-wrapper-image-copyright"],["class","creator",4,"ngIf"],["class","location",4,"ngIf"],[3,"src","alt",4,"ngIf"],[1,"login-wrapper-form"],[1,"login-title"],[1,"login-form"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"],["src","assets/logo-300px.png",1,"login-wrapper-logo"],[1,"creator"],["target","_blank",3,"href"],[1,"location"],[3,"src","alt"]],template:function(n,e){1&n&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"div",5),a.YNc(8,d,7,3,"p",6),a.YNc(9,h,2,1,"p",7),a.qZA(),a.qZA(),a.YNc(10,f,1,2,"img",8),a.qZA(),a.TgZ(11,"div",9),a.TgZ(12,"p",10),a._uU(13),a.ALo(14,"translate"),a.qZA(),a.TgZ(15,"form",11),a.TgZ(16,"div",12),a.TgZ(17,"input",13),a.NdJ("ngModelChange",function(n){return e.username=n}),a.ALo(18,"translate"),a.qZA(),a.TgZ(19,"input",14),a.NdJ("ngModelChange",function(n){return e.password=n}),a.ALo(20,"translate"),a.qZA(),a.TgZ(21,"clr-alert",15),a.TgZ(22,"clr-alert-item"),a.TgZ(23,"span",16),a._uU(24),a.qZA(),a.qZA(),a.qZA(),a.TgZ(25,"clr-checkbox-wrapper"),a.TgZ(26,"input",17),a.NdJ("ngModelChange",function(n){return e.rememberMe=n}),a.qZA(),a.TgZ(27,"label"),a._uU(28),a.ALo(29,"translate"),a.qZA(),a.qZA(),a.TgZ(30,"button",18),a.NdJ("click",function(){return e.logIn()}),a._uU(31),a.ALo(32,"translate"),a.qZA(),a.qZA(),a.TgZ(33,"div",19),a.YNc(34,_,3,2,"span",20),a.YNc(35,C,2,0,"span",20),a.YNc(36,M,2,1,"span",20),a.qZA(),a.qZA(),a.qZA(),a._UZ(37,"img",21),a.qZA(),a.qZA()),2&n&&(a.xp6(5),a.hij(" ",a.lcZ(6,21,"common.login-image-title")," "),a.xp6(3),a.Q6J("ngIf",e.imageCreator),a.xp6(1),a.Q6J("ngIf",e.imageLocation),a.xp6(1),a.Q6J("ngIf",e.imageUrl),a.xp6(3),a.hij(" ",a.lcZ(14,23,"common.login-title")," "),a.xp6(4),a.Q6J("ngModel",e.username)("placeholder",a.lcZ(18,25,"common.username")),a.xp6(2),a.Q6J("ngModel",e.password)("placeholder",a.lcZ(20,27,"common.password")),a.xp6(2),a.ekj("visible",e.errorMessage),a.Q6J("clrAlertType","danger")("clrAlertClosable",!1),a.xp6(3),a.hij(" ",e.errorMessage," "),a.xp6(2),a.Q6J("ngModel",e.rememberMe),a.xp6(2),a.Oqu(a.lcZ(29,29,"common.remember-me")),a.xp6(2),a.Q6J("disabled",!e.username||!e.password),a.xp6(1),a.hij(" ",a.lcZ(32,31,"common.login")," "),a.xp6(3),a.Q6J("ngIf",e.brand),a.xp6(1),a.Q6J("ngIf",!e.hideVendureBranding),a.xp6(1),a.Q6J("ngIf",!e.hideVersion))},directives:[c.O5,s._Y,s.JL,s.F,p.y_K,s.Fj,s.JJ,s.On,m.TIm,m.CyW,m.I9z,m.PEh,s.Wl,m.KKC,m.MgK],pipes:[u.X$],styles:[".login-wrapper[_ngcontent-%COMP%]{background:#f0f2f5;background-image:none;height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{background:#fff;width:1120px;height:590px;display:flex;justify-content:flex-start;align-items:stretch;position:relative;border-radius:3px;overflow:hidden}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{flex-direction:column;height:auto;width:100%}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:100%;flex-grow:1;position:relative}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:300px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover;object-position:center;position:relative;z-index:1}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;bottom:0;z-index:10;background:#020024;background:linear-gradient(180deg,rgba(2,0,36,0) 0%,rgba(0,0,0,.75) 100%);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end;padding:30px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:bold;color:#fff;margin-bottom:20px}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.2rem}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]{opacity:.8}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6rem;color:#fff;margin:0!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:100%;width:400px;padding:40px;display:flex;flex-direction:column;align-items:stretch;justify-content:center;box-shadow:0 20px 25px #0000001a;overflow:hidden;border-radius:5px;flex-shrink:0}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:auto;width:100%;padding:20px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-weight:bold;font-size:1.2rem;margin-bottom:20px;color:#afafaf}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.username[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.password[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:15px;padding:12px 16px!important;background:#fff;font-size:14px;line-height:22px;color:#52667a;outline:none;-webkit-appearance:none}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%!important;margin-top:20px!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-logo[_ngcontent-%COMP%]{width:60px;height:auto;position:absolute;right:20px;top:20px}.version[_ngcontent-%COMP%]{flex:1;flex-grow:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation-delay:.2s;transform:translate(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@keyframes shake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}"]}),x.ctorParameters=function(){return[{type:p.e80},{type:g.F0},{type:o.eN}]};var P=function(){function e(t,r){n(this,e),this.router=t,this.authService=r}return t(e,[{key:"canActivate",value:function(n){var e=this;return this.authService.checkAuthenticatedStatus().pipe((0,l.U)(function(n){return n&&e.router.navigate(["/"]),!n}))}}]),e}();P.\u0275fac=function(n){return new(n||P)(a.LFG(g.F0),a.LFG(p.e80))},P.\u0275prov=a.Yz7({factory:function(){return new P(a.LFG(g.F0),a.LFG(p.e80))},token:P,providedIn:"root"}),P.ctorParameters=function(){return[{type:g.F0},{type:p.e80}]};var O=[{path:"",component:x,pathMatch:"full",canActivate:[P]}],v=t(function e(){n(this,e)});v.\u0275fac=function(n){return new(n||v)},v.\u0275mod=a.oAB({type:v}),v.\u0275inj=a.cJS({imports:[[p.m81,g.Bz.forChild(O)]]})}}])}();
//# sourceMappingURL=376-es5.27edfc881c38f277fd8c.js.map